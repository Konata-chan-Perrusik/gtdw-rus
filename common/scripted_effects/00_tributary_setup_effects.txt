# This file contains the setup effects for the tributaries in the game.
# The setup_tributaries_effect is invoked by on_game_start and should make calls to subsequent scripted effects.
# Sections are organized by top-suzerain title.
# Note that existing vassals (as established in title history) must be released and recreated into tributaries before
# they can have their own tributaries.

setup_tributaries_effect = {
	if = {
    	limit = { current_date = 1254.1.1 }
       	gh_1254_tributary_setup_effect = yes
    }	
}

# $TRIBUTARY$ = the new tributary
# $SUZERAIN$ = their suzerain
# $WAR$ = determines if this was caused by war or agreement, yes or no
break_subject_contract_and_establish_tributary_effect = {
	if = {
		limit = { liege != this }
		create_title_and_vassal_change = {
			type = independency
			save_scope_as = change
			add_claim_on_loss = no
		}
		becomes_independent = {
			change = scope:change
		}
		resolve_title_and_vassal_change = scope:change
	}
	start_tributary_interaction_effect = {
		SUZERAIN = $SUZERAIN$
		TRIBUTARY = $TRIBUTARY$
	}
}


gh_1254_tributary_setup_effect = {
	### k_ayyar
	character:auzangeb_ruidari_1 = { # Gopala of Ayyar
		save_scope_as = suzerain
		character:leriseb_sheharddi_2 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
		character:babura_ruidari_2 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
		character:babura_ruidari_5 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
		character:babura_ruidari_3 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
		character:babura_ruidari_1 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
		character:leriseb_sheharddi_1 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
	}
	### e_aironoi
	character:easternimperial_aironoian_aagiokrata_1 = {
		save_scope_as = suzerain
		character:jaravad_cumani_7 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
	}
	character:khorinot_cumani_1 = {
		save_scope_as = suzerain
		character:yevamarai_aversarinas_aagiokrata_1 = {
			break_subject_contract_and_establish_tributary_effect = { SUZERAIN = scope:suzerain TRIBUTARY = this }
		}
	}
}