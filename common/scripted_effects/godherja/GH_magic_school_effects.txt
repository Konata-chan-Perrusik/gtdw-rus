
# GH TODO: Search for all spell initializations that begin with '#', and either properly implement them or remove them

initialize_preset_magic_schools_effect = {
	initialize_global_aspect_list_effect = yes
 
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = living_magic }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = blood VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = dead_magic }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = death VALUE = 1 }
	
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = silentspeak }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = ethereal VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = wood_law }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = blood VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = keepers_of_the_grove }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = keepers_of_legends }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = metal VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }

	#ClanLands
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = day_court }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = light VALUE =  1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = night_court }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dark VALUE =  1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = school_of_esoterics }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = celestial VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = ethereal VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dark VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = school_of_manifestations }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = metal VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = school_of_malignancies } 
	add_aspect_to_last_created_magic_school_effect = { ASPECT = death VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = ice VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = blood VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = obsidian_mirror_oneiroscopy }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dark VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = air VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = greenwenders_of_sarradon }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }
	
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = luminous_discipline }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = light VALUE =  2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }
	
	#Redlander
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = absolution_of_the_void }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dark VALUE = 2 }

	#Islands
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = amber_cup_rites }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE =  2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = air VALUE = 1 }

	#Marcher
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = illuminated_order_of_holy_principles }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = light VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = blood VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = celestial VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = alchimuur }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }

	#Pirate Coast
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = school_of_night_scrying }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = celestial VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = air VALUE = 1 }
	

	#Liches
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = school_of_rejection }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = death VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dark VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 1 }

	#Damota
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = songs_of_service_and_sight }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = light VALUE =  1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }
	
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = chants_of_the_tomb }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = ethereal VALUE =  1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = blood VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = death VALUE = 1 }
	
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = dirges_of_the_burned_and_broken }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE =  1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 1 }

	#KASH SCHOOLS
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = oraculars }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = celestial VALUE = 2 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = empiricists }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE =  1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 1 }

	#Oltenic
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = spirit_voice }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = air VALUE =  2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }

	#Cuthanagi/Kasiryat Cultures
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = adio_kasir }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE = 2 }

	#Nattanan Cultures
	create_magic_school_with_global_identifier_effect =  { MAGIC_SCHOOL_IDENTIFIER = path_of_the_twin_gods }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 1 }


	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = 99_marks_of_power }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dark VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = blood VALUE = 1 }

	#Korlacan Culture (subset of Nattanan Heritage)
	create_magic_school_with_global_identifier_effect =  { MAGIC_SCHOOL_IDENTIFIER = disciples_of_the_sacred_flame }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = metal VALUE = 1 }

	#Kemsari Cultures
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = rites_of_the_land_beyond }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = sand VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = death VALUE = 1 }

	#Aekershaani Cultures
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = sungazers }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = light VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }

	#Dahangon Cultures
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = lemad_dakta }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = stone VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = scarlet_bronze_formulae }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = fire VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = metal VALUE = 1 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = azure_serpent_sect }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = water VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dream VALUE = 1 }

	## Kherkeloi Schools
	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = temple_of_the_vitreous_precept }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = air VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = metal VALUE = 2 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = wane_tender_harmoniarchy }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = light VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = sand VALUE = 2 }

	create_magic_school_with_global_identifier_effect = { MAGIC_SCHOOL_IDENTIFIER = auroral_cycle }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = dawn VALUE = 2 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = nature VALUE = 1 }
	add_aspect_to_last_created_magic_school_effect = { ASPECT = time VALUE = 2 }


	# School assignment

	every_culture_global = {
		limit = { 
			OR = {
				has_cultural_pillar = heritage_clanlander
				has_cultural_pillar = heritage_kelthiunai
			}
		}
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:day_court MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:night_court MASTERY = 1 }
	}
	every_culture_global = {
		limit = {
			OR = {
				has_cultural_pillar = heritage_aversarian
				any_parent_culture_or_above = {
					has_cultural_pillar = heritage_aversarian
				}
			}
			NOT = { has_name_list = name_list_chevalo_aversarian }
		}
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:living_magic MASTERY = 8 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:dead_magic MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_redlander }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:absolution_of_the_void MASTERY = 8 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_sjalvolki }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:wood_law MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:silentspeak MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_kardwen }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:wood_law MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_mondecny }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:wood_law MASTERY = 3 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_karzarad }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:keepers_of_legends MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:wood_law MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_goan }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:dead_magic MASTERY = 4 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_sarminian }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:dead_magic MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:living_magic MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_partic }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:keepers_of_the_grove MASTERY = 8 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_abadelos }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:adio_kasir MASTERY = 8 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_fog_eaters }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:silentspeak MASTERY = 8 }
	}
	every_culture_global = {
		limit = { 
			AND = {
					has_cultural_pillar = heritage_nattanan 	
					has_cultural_tradition = tradition_jungle_dwellers
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:path_of_the_twin_gods MASTERY = 7 }
	}
	every_culture_global = {
		limit = { 
			AND = {
					has_cultural_pillar = heritage_korlacan
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:disciples_of_the_sacred_flame MASTERY = 7 }
	}
	every_culture_global = {
		limit = { 
			AND = {
					has_cultural_pillar = heritage_nattanan 
					has_cultural_tradition = tradition_kedari_marked
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:99_marks_of_power MASTERY = 7 }
	}


	#sarradon
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_kharadamatian }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_sarradonian }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_dawic }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_saradari }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_arapa }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_marmaladid }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_dezhunic }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:luminous_discipline MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_madikirib }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_esoterics MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_manifestations MASTERY = 4 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_malignancies MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:obsidian_mirror_oneiroscopy MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:greenwenders_of_sarradon MASTERY = 1 }
	}

	every_culture_global = {
		limit = { has_cultural_pillar = heritage_marcher }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:living_magic MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:illuminated_order_of_holy_principles MASTERY = 3 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_konijkmener }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:living_magic MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:alchimuur MASTERY = 3 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:illuminated_order_of_holy_principles MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_lich } # GH_TODO: update for ancient ojy culture
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_rejection MASTERY = 8 }
	}
	every_culture_global = {
		limit = {
			OR = {
				has_cultural_pillar = heritage_nakahanii 
				has_cultural_pillar = heritage_aembarisa
				has_cultural_pillar = heritage_kevaali
				has_cultural_pillar = heritage_vespartsva
				has_cultural_pillar = heritage_ashkeschi
				has_cultural_pillar = heritage_asariyna
				has_cultural_pillar = heritage_ouwabadin
				has_cultural_pillar = heritage_dadkawji
			}
		}
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:school_of_night_scrying MASTERY = 4}
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_kherkeloi }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:living_magic MASTERY = 1 }
		if = {
			limit = { NOT = { this = culture:jarakmar } }
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:amber_cup_rites MASTERY = 1 }
		}
		else = { assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:dead_magic MASTERY = 2 } }
		if = {
			limit = {
				OR = {
					this = culture:sunakari
					any_parent_culture_or_above = { this = culture:sunakari }
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:wane_tender_harmoniarchy MASTERY = 1 }
			if = {
				limit = { has_cultural_tradition = tradition_glass_smiths }
				assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:temple_of_the_vitreous_precept MASTERY = 2 }
			}
			else = { assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:temple_of_the_vitreous_precept MASTERY = 1 } }
		}
		if = {
			limit = {
				OR = {
					this = culture:astilik
					any_parent_culture_or_above = { this = culture:astilik }
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:auroral_cycle MASTERY = 5 }
		}

	}
	every_culture_global = {
		limit = {
			OR = {
				has_cultural_tradition = tradition_islander
				has_cultural_tradition = tradition_settlers_of_krehejad
				has_cultural_pillar = heritage_afoseniai
				has_cultural_pillar = heritage_iseni
			}
		}
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:amber_cup_rites MASTERY = 3 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_damotan }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:songs_of_service_and_sight MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:dirges_of_the_burned_and_broken MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:chants_of_the_tomb MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_aekershaani }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:sungazers MASTERY = 3 }
	}

	#Kash
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_chordhan }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}

	every_culture_global = {
		limit = { has_cultural_pillar = heritage_emanhi }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
		every_culture_global = {
		limit = { has_cultural_pillar = heritage_athacaya }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_haraja }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_dayatemi }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:wane_tender_harmoniarchy MASTERY = 1 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_rekhala }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_agnala }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_margur }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_aevakori }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_aafarzay }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_zonthawa }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_khokhuud }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_adhata }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_likarkho }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:empiricists MASTERY = 5 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:oraculars MASTERY = 2 }
	}
	#oltenic
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_vhanavid }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:spirit_voice MASTERY = 3 }
		if = {
			limit = { any_parent_culture_or_above = { this = culture:astilik } }
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:auroral_cycle MASTERY = 1 }
		}
	}

	#Kemsar
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_kemsari }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:rites_of_the_land_beyond MASTERY = 3 }
	}

	#Dahangon
	every_culture_global = {
		limit = { has_cultural_pillar = heritage_tanarka }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:lemad_dakta MASTERY = 7 }
	}

	every_culture_global = {
		limit = { 
			AND = {
					has_cultural_pillar = heritage_tanarka
					has_cultural_tradition = tradition_metal_craftsmanship
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:scarlet_bronze_formulae MASTERY = 3 }
	}

	every_culture_global = {
		limit = { 
			AND = {
					has_cultural_pillar = heritage_easterner
					has_cultural_tradition = tradition_metal_craftsmanship
				}
			}
			assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:scarlet_bronze_formulae MASTERY = 3 }
	}

	every_culture_global = {
		limit = { has_cultural_pillar = heritage_easterner }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:azure_serpent_sect MASTERY = 5 }
	}

	every_culture_global = {
		limit = { 
			NOT = { has_variable_list = magic_school_list } 
		}
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:living_magic MASTERY = 1 }
		assign_magic_school_to_culture_effect = { MAGIC_SCHOOL = global_var:dead_magic MASTERY = 1 }
	}
}

initialize_preset_magic_school_spells_effect = {
	# Living Magic
	global_var:living_magic = {
		# Sarradonian Period (??? - 6th century BI)
		assign_spell_to_magic_school_effect = { SPELL = global_var:ritual_bloodletting }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ritual_sacrifice }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:combat_pyromantics }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_scarlet_kings_feast }
		assign_spell_to_magic_school_effect = { SPELL = global_var:invocation_of_the_wise_mother }
		assign_spell_to_magic_school_effect = { SPELL = global_var:invocation_of_the_red_frenzy }
		assign_spell_to_magic_school_effect = { SPELL = global_var:hex_of_the_black_vein }
		assign_spell_to_magic_school_effect = { SPELL = global_var:seal_of_the_red_madness }
		# Gortillian Period (6th century BI - 2nd century IS)
		assign_spell_to_magic_school_effect = { SPELL = global_var:humorsurge_syngos }
		assign_spell_to_magic_school_effect = { SPELL = global_var:humorsurge_elemochis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:humorsurge_pyrax }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:cupbearers_ward }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_cradles_blessing }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_iron_vitae }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_red_chain }
		# GH TODO: Reimplement once activity rituals are a thing
		#assign_spell_to_magic_school_effect = { SPELL = global_var:mephrian_revelry }
		assign_spell_to_magic_school_effect = { SPELL = global_var:oracle_of_the_abattoir_sky }
		assign_spell_to_magic_school_effect = { SPELL = global_var:hex_of_the_weaksblood_culling }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_violet_chalice } # FIX
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_the_magnantinian_sisterhood }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_the_dragonrider }
		# Early Imperial Period (2nd century IS - 8th century IS)
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_hatznurs_bounty }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_pollidides_guiding_lamp }
		assign_spell_to_magic_school_effect = { SPELL = global_var:perioikenas_hearthfire_ceremony }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_farseeing_chalice }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_false_dragonflame }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_vortex_of_imperial_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_healers_radiance }
		assign_spell_to_magic_school_effect = { SPELL = global_var:oath_of_the_unwavering_legionnaire }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_pooled_blood }
		assign_spell_to_magic_school_effect = { SPELL = global_var:heartsong_of_ietros  }
		assign_spell_to_magic_school_effect = { SPELL = global_var:oath_of_soter_valthronax }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mysteries_of_megarea }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mnestra_kosalosis_mysteries }
		assign_spell_to_magic_school_effect = { SPELL = global_var:invocation_of_the_quickened_vitae }
		assign_spell_to_magic_school_effect = { SPELL = global_var:invocation_of_the_five_words_of_passion }
		assign_spell_to_magic_school_effect = { SPELL = global_var:kydelan_procedure }
		assign_spell_to_magic_school_effect = { SPELL = global_var:hex_of_the_kothexas_kiss }
		assign_spell_to_magic_school_effect = { SPELL = global_var:makleanic_hex }
		assign_spell_to_magic_school_effect = { SPELL = global_var:xenophoric_mark_of_hatred }
		assign_spell_to_magic_school_effect = { SPELL = global_var:eramos_call_to_sword_and_hammer }
		# Mayikprolollan Golden Age (8th century IS - 11th century IS)
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_nightowls_eye }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_carmine_ink }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_oxens_heart }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_burnt_laurel }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_gilded_olive }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_foolsblood_ashes }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_trolls_blood }
		assign_spell_to_magic_school_effect = { SPELL = global_var:phylactery_of_the_hyacinth_wine }
		assign_spell_to_magic_school_effect = { SPELL = global_var:humor_transfusion_syngos }
		assign_spell_to_magic_school_effect = { SPELL = global_var:humor_transfusion_pyrax }
		assign_spell_to_magic_school_effect = { SPELL = global_var:humor_transfusion_elemochis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_bola_aimatos }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_paeda_alikou }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_pyrovestis_ypallos }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_ionimo_edos }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_krysos_aima }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_alikarchexes_nea }
		assign_spell_to_magic_school_effect = { SPELL = global_var:formula_tetrita_aima }
		assign_spell_to_magic_school_effect = { SPELL = global_var:procedure_of_the_heart_unvanquished }
		assign_spell_to_magic_school_effect = { SPELL = global_var:pelinosian_procedure }
		
		#populate_magic_school_with_procedural_spell_list_effect = { COUNT = 30 }
	}
	
	# Dead Magic
	global_var:dead_magic = {
		#assign_spell_to_magic_school_effect = { SPELL = global_var:sigil_soters_shield }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:sigil_naupyrnan_octagram }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:sigil_three_lobed_walnut }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:sigil_sundered_three_lobed_walnut }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:ward_of_the_ashen_key }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:technique_of_the_twelve_folds }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:sigil_of_the_widows_iron }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_aspomnoxian_earthshakers }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_diminished_aervalrshard }
		
		#populate_magic_school_with_procedural_spell_list_effect = { COUNT = 30 }
		
		
		assign_spell_to_magic_school_effect = { SPELL = global_var:summon_precious_meteor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:precious_metal_transmutation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_building_construction }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stoneskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:boneshaping }
		assign_spell_to_magic_school_effect = { SPELL = global_var:raise_skeletal_host }
		assign_spell_to_magic_school_effect = { SPELL = global_var:crush_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:petrify }
		assign_spell_to_magic_school_effect = { SPELL = global_var:skeletalcraft }
		assign_spell_to_magic_school_effect = { SPELL = global_var:skeletalartifact }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_serpent }
		assign_spell_to_magic_school_effect = { SPELL = global_var:strengthen_soil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_golem_familiar }
		assign_spell_to_magic_school_effect = { SPELL = global_var:pull_meteor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:moon_magic_generation_spell }
		assign_spell_to_magic_school_effect = { SPELL = global_var:necrotic_boon }
		assign_spell_to_magic_school_effect = { SPELL = global_var:lunar_astrology }
	}

	# Silentspeak
	global_var:silentspeak = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:siphon_rift_power }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ward_of_the_ancestors }
		assign_spell_to_magic_school_effect = { SPELL = global_var:riftmark }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:summonfog }
		assign_spell_to_magic_school_effect = { SPELL = global_var:obliterate_mind }
	}

	# Wood-Law
	global_var:wood_law = {
		set_variable = { name = secondary_aspect_aesthetics value = flag:nature } # Looks nicer
		assign_spell_to_magic_school_effect = { SPELL = global_var:ritual_sacrifice }
		assign_spell_to_magic_school_effect = { SPELL = global_var:poison_nature }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sacrifice_rare_herbs }
		assign_spell_to_magic_school_effect = { SPELL = global_var:strengthen_soil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:blood_rage_spell }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sporecloud_spell }
		assign_spell_to_magic_school_effect = { SPELL = global_var:photosynthesis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:create_wooden_walls }
		assign_spell_to_magic_school_effect = { SPELL = global_var:barkskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
	}
	
	# Keepers of the Grove
	global_var:keepers_of_the_grove = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sacrifice_rare_herbs }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sporecloud_spell }
		assign_spell_to_magic_school_effect = { SPELL = global_var:photosynthesis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:create_wooden_walls }
		assign_spell_to_magic_school_effect = { SPELL = global_var:barkskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:extract_lucrative_secrets }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:obliterate_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
	}

	global_var:keepers_of_legends = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:bloodblight_magic }
		assign_spell_to_magic_school_effect = { SPELL = global_var:pox_magic }
		assign_spell_to_magic_school_effect = { SPELL = global_var:poison_nature }
		assign_spell_to_magic_school_effect = { SPELL = global_var:resist_disease }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_metal_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:precious_metal_transmutation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ironskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:crush_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:summon_precious_meteor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:panoply_of_steel }
		assign_spell_to_magic_school_effect = { SPELL = global_var:imbued_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
	}

	global_var:day_court = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:nourishing_radiance }
		assign_spell_to_magic_school_effect = { SPELL = global_var:laser_beam }
		assign_spell_to_magic_school_effect = { SPELL = global_var:create_wooden_walls }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:barkskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:interior_journey }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:photosynthesis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_light_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
	}

	global_var:night_court = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:veil_of_nightmarish_illusions }
		assign_spell_to_magic_school_effect = { SPELL = global_var:dark_illusions_magic }
		assign_spell_to_magic_school_effect = { SPELL = global_var:create_wooden_walls }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:barkskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:interior_journey }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dark_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
	}

	global_var:school_of_esoterics = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:skeletalartifact }
		assign_spell_to_magic_school_effect = { SPELL = global_var:moon_magic_generation_spell }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:lunar_astrology }
		assign_spell_to_magic_school_effect = { SPELL = global_var:haunting_power }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spoils_of_the_dead }
		assign_spell_to_magic_school_effect = { SPELL = global_var:necrotic_boon }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_celestial_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dark_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_ethereal_elementals_army }
	}

	global_var:school_of_manifestations = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:arcane_irrigation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:panoply_of_steel }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_fortress }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_golem_familiar }
		assign_spell_to_magic_school_effect = { SPELL = global_var:precious_metal_transmutation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_building_construction }
		assign_spell_to_magic_school_effect = { SPELL = global_var:earthquake }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rejuvenation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_quicksilver_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_water_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_metal_elementals_army }

	}

	global_var:school_of_malignancies = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:iceskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:freeze_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:vampirism }
		assign_spell_to_magic_school_effect = { SPELL = global_var:domination }
		assign_spell_to_magic_school_effect = { SPELL = global_var:raise_skeletal_host }
		assign_spell_to_magic_school_effect = { SPELL = global_var:necrotic_boon }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_ice_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_ice_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_death_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_blood_elementals_army }


	}

	global_var:obsidian_mirror_oneiroscopy = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:corrupt_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:veil_of_nightmarish_illusions }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:add_county_modifier_reduce_agriculture_magic_modifier }
		assign_spell_to_magic_school_effect = { SPELL = global_var:favorable_winds }
		assign_spell_to_magic_school_effect = { SPELL = global_var:obliterate_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:interior_journey }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dark_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_air_elementals_army }
	}

	global_var:greenwenders_of_sarradon = {
		#assign_spell_to_magic_school_effect = { SPELL = global_var:wisdom_of_the_leaf_whispers }
		assign_spell_to_magic_school_effect = { SPELL = global_var:justice_of_the_primeval_garden }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cedar_witchs_hex }
		assign_spell_to_magic_school_effect = { SPELL = global_var:embercrown_coronation }
	 	assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_fire_elementals_army }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:tu_nihanas_fork_tongued_speak }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:fire_healing }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:woodland_inferno }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:sporecloud_spell }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:photosynthesis }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_war }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
	}

	global_var:luminous_discipline = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:fire_magick }
		assign_spell_to_magic_school_effect = { SPELL = global_var:drought_fire }
		assign_spell_to_magic_school_effect = { SPELL = global_var:guiding_light }
		assign_spell_to_magic_school_effect = { SPELL = global_var:laser_beam }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fire_healing }
		assign_spell_to_magic_school_effect = { SPELL = global_var:light_fortress }
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_learning }
		assign_spell_to_magic_school_effect = { SPELL = global_var:vitalize_livestock }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_light_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_fire_elementals_army }
	}

	global_var:absolution_of_the_void = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:prayer_of_dark_enlightenment }
		assign_spell_to_magic_school_effect = { SPELL = global_var:dark_illusions_magic }
		assign_spell_to_magic_school_effect = { SPELL = global_var:veil_of_nightmarish_illusions }
		assign_spell_to_magic_school_effect = { SPELL = global_var:blind_all }
		assign_spell_to_magic_school_effect = { SPELL = global_var:corrupt_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:erase_mental_trauma }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_entropic_host }
		assign_spell_to_magic_school_effect = { SPELL = global_var:weavers_descent }
		assign_spell_to_magic_school_effect = { SPELL = global_var:awaken_fleshmaw }
		assign_spell_to_magic_school_effect = { SPELL = global_var:dark_raid }	# GH TODO: Readd this
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dark_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sundeath }
	}

	global_var:amber_cup_rites = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_diplomacy }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fleet_footed }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_strider }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fair_weather }
		assign_spell_to_magic_school_effect = { SPELL = global_var:favorable_winds }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:add_county_modifier_reduce_agriculture_magic_modifier }
		assign_spell_to_magic_school_effect = { SPELL = global_var:calming_waters }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rejuvenation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_water_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_air_elementals_army }
	}

	global_var:illuminated_order_of_holy_principles = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:tarot_quin_rois }
		assign_spell_to_magic_school_effect = { SPELL = global_var:tarot_gisredde_deck }
		assign_spell_to_magic_school_effect = { SPELL = global_var:tarot_raocourt }
		assign_spell_to_magic_school_effect = { SPELL = global_var:tarot_forbanne }
		assign_spell_to_magic_school_effect = { SPELL = global_var:narghile_mysticalis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:four_chants_and_three_rites_of_miasmic_purge }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_the_star_reader }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_the_orcindian_order }
		assign_spell_to_magic_school_effect = { SPELL = global_var:dowsing_rod_of_witch_hazel }
		assign_spell_to_magic_school_effect = { SPELL = global_var:baume_consecrationis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:tabela_oejeynicaise }
		#populate_magic_school_with_procedural_spell_list_effect = { COUNT = 30 }
	}

	global_var:alchimuur = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:arcane_irrigation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_diplomacy }
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:bloodblight_magic }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sacrifice_rare_herbs }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rejuvenation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_water_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
	}

	global_var:school_of_night_scrying = {
		#assign_spell_to_magic_school_effect = { SPELL = global_var:lunar_astrology }
		assign_spell_to_magic_school_effect = { SPELL = global_var:moon_magic_generation_spell }
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_stewardship }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fair_weather }
		assign_spell_to_magic_school_effect = { SPELL = global_var:favorable_winds }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:add_county_modifier_reduce_agriculture_magic_modifier}
		assign_spell_to_magic_school_effect = { SPELL = global_var:fleet_footed }
		assign_spell_to_magic_school_effect = { SPELL = global_var:pull_meteor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_celestial_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_air_elementals_army }

	}

	global_var:school_of_rejection = {
		#assign_spell_to_magic_school_effect = { SPELL = global_var:corrupted_elegy_of_the_wise_king }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:corrupted_elegy_of_the_dutiful_smith }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:rite_of_the_grand_awakening }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:skeletalcraft }
		assign_spell_to_magic_school_effect = { SPELL = global_var:skeletalartifact }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sorrow }
		assign_spell_to_magic_school_effect = { SPELL = global_var:veil_of_nightmarish_illusions }
		assign_spell_to_magic_school_effect = { SPELL = global_var:earth_magick }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_fortress }
		assign_spell_to_magic_school_effect = { SPELL = global_var:petrify }
	}

	global_var:songs_of_service_and_sight = {
		set_variable = { name = secondary_aspect_aesthetics value = flag:light }
		assign_spell_to_magic_school_effect = { SPELL = global_var:unveiling }
		assign_spell_to_magic_school_effect = { SPELL = global_var:guiding_light }
		assign_spell_to_magic_school_effect = { SPELL = global_var:photosynthesis }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nourishing_radiance }
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_learning }
		assign_spell_to_magic_school_effect = { SPELL = global_var:wall_of_twisted_thorns }
		assign_spell_to_magic_school_effect = { SPELL = global_var:thornskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:interior_journey }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:extract_lucrative_secrets }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_light_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
	}

	global_var:chants_of_the_tomb = {
		set_variable = { name = secondary_aspect_aesthetics value = flag:ethereal }
		assign_spell_to_magic_school_effect = { SPELL = global_var:necrotic_boon }
		assign_spell_to_magic_school_effect = { SPELL = global_var:raise_skeletal_host }
		assign_spell_to_magic_school_effect = { SPELL = global_var:haunting_power }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ward_of_the_ancestors }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ritual_bloodletting }
		assign_spell_to_magic_school_effect = { SPELL = global_var:summonfog }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ritual_sacrifice }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:ancestral_betrayal }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_death_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_blood_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_ethereal_elementals_army }
		#(Readd when fixed) assign_spell_to_magic_school_effect = { SPELL = global_var:rift_walk }
	}

	global_var:dirges_of_the_burned_and_broken = {
		set_variable = { name = secondary_aspect_aesthetics value = flag:fire }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fire_magick }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_building_construction }
		assign_spell_to_magic_school_effect = { SPELL = global_var:woodland_inferno }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_magma_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:earthquake }
		assign_spell_to_magic_school_effect = { SPELL = global_var:drought_fire }
		assign_spell_to_magic_school_effect = { SPELL = global_var:magistrength }
		assign_spell_to_magic_school_effect = { SPELL = global_var:strengthen_soil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:wall_of_twisted_thorns }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stoneskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_fire_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_elementals_army }
	}

	global_var:oraculars = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_stewardship }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:lunar_astrology }
		assign_spell_to_magic_school_effect = { SPELL = global_var:moon_magic_generation_spell }
		assign_spell_to_magic_school_effect = { SPELL = global_var:pull_meteor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:extract_lucrative_secrets }
		assign_spell_to_magic_school_effect = { SPELL = global_var:obliterate_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:unveiling }
		assign_spell_to_magic_school_effect = { SPELL = global_var:interior_journey }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_celestial_elementals_army }
	}

	global_var:empiricists = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:fire_magick }
		assign_spell_to_magic_school_effect = { SPELL = global_var:firestorm }
		assign_spell_to_magic_school_effect = { SPELL = global_var:magistrength }
		assign_spell_to_magic_school_effect = { SPELL = global_var:arcane_irrigation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_healing }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_strider }
		assign_spell_to_magic_school_effect = { SPELL = global_var:drought_water }
		assign_spell_to_magic_school_effect = { SPELL = global_var:calming_waters }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stoneskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_building_construction }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_magma_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:earthquake }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_water_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_fire_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_elementals_army }

	}

	global_var:spirit_voice = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:lightning_blades }
		assign_spell_to_magic_school_effect = { SPELL = global_var:tornado }
		assign_spell_to_magic_school_effect = { SPELL = global_var:favorable_winds }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fair_weather }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:add_county_modifier_reduce_agriculture_magic_modifier }
		assign_spell_to_magic_school_effect = { SPELL = global_var:glimpse_reality }
		assign_spell_to_magic_school_effect = { SPELL = global_var:extract_lucrative_secrets }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_air_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }
	}

	global_var:adio_kasir = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:arcane_irrigation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:calming_waters }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rejuvenation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:riverine_rush }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fluvial_restoration }
		assign_spell_to_magic_school_effect = { SPELL = global_var:blessing_of_the_kasiryat }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_water_elementals_army }
	}

	global_var:path_of_the_twin_gods = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_building_construction }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sacrifice_rare_herbs }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:strengthen_soil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_mountain_spirit_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_wild_leshens_armies} 
	}

	global_var:99_marks_of_power = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_strength }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_acuity }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_alacrity }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_rage }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_insight }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_pain }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_wasting }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_control }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mark_of_blinding }
	}

	global_var:disciples_of_the_sacred_flame = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_metal_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_fire_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_metal_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:fire_magick }
		assign_spell_to_magic_school_effect = { SPELL = global_var:magistrength }
		assign_spell_to_magic_school_effect = { SPELL = global_var:firestorm }
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_war }
		assign_spell_to_magic_school_effect = { SPELL = global_var:precious_metal_transmutation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ironskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:crush_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:summon_precious_meteor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:panoply_of_steel }
		assign_spell_to_magic_school_effect = { SPELL = global_var:imbued_armor }
	}

	global_var:rites_of_the_land_beyond  = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:devour_fortifications }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:desertify }
		assign_spell_to_magic_school_effect = { SPELL = global_var:erode_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:raise_skeletal_host }
		assign_spell_to_magic_school_effect = { SPELL = global_var:skeletalartifact }
		assign_spell_to_magic_school_effect = { SPELL = global_var:necrotic_boon }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sinking_sands } 
		assign_spell_to_magic_school_effect = { SPELL = global_var:sand_shield } 
		assign_spell_to_magic_school_effect = { SPELL = global_var:sandforged_weapons } 
		assign_spell_to_magic_school_effect = { SPELL = global_var:dune_speed }
		assign_spell_to_magic_school_effect = { SPELL = global_var:oasis_bloom } 
		assign_spell_to_magic_school_effect = { SPELL = global_var:armor_shred} 
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dune_reaper_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_sand_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_death_elementals_army }
	}

	global_var:sungazers = {
		#fire aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:fire_magick }
		assign_spell_to_magic_school_effect = { SPELL = global_var:magistrength }
		assign_spell_to_magic_school_effect = { SPELL = global_var:firestorm }
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_war }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_fire_elementals_army }
		#light aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_learning }
		assign_spell_to_magic_school_effect = { SPELL = global_var:drought_light }
		assign_spell_to_magic_school_effect = { SPELL = global_var:laser_beam }
		assign_spell_to_magic_school_effect = { SPELL = global_var:guiding_light }
		assign_spell_to_magic_school_effect = { SPELL = global_var:eternal_day }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_light_elementals_army }
		#other
		assign_spell_to_magic_school_effect = { SPELL = global_var:ohrasiks_fervor }
	}

	global_var:lemad_dakta = {
		#nature aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sporecloud_spell }
		#water aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_diplomacy }
		assign_spell_to_magic_school_effect = { SPELL = global_var:rejuvenation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:surging_tides }

		#other/mixed aspects
		assign_spell_to_magic_school_effect = { SPELL = global_var:arcane_irrigation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:strengthen_soil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_vine_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:create_morass }
	}

	global_var:scarlet_bronze_formulae = {
		#metal aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:crush_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:precious_metal_transmutation }
		assign_spell_to_magic_school_effect = { SPELL = global_var:bronzeskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_bronze_golem_armies }
		assign_spell_to_magic_school_effect = { SPELL = global_var:bestow_bronze_armaments }
		assign_spell_to_magic_school_effect = { SPELL = global_var:bronze_fists }
		#fire aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_war }
		#assign_spell_to_magic_school_effect = { SPELL = global_var:melt_armor }
		assign_spell_to_magic_school_effect = { SPELL = global_var:dragons_roar }
		#other/mixed aspects
		assign_spell_to_magic_school_effect = { SPELL = global_var:arcane_foundries }
	}

	global_var:azure_serpent_sect = {
		#dream aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:unveiling }
		assign_spell_to_magic_school_effect = { SPELL = global_var:cloud_mind }
		#water aspect
		assign_spell_to_magic_school_effect = { SPELL = global_var:auspex_of_diplomacy }
		assign_spell_to_magic_school_effect = { SPELL = global_var:calming_waters }
		assign_spell_to_magic_school_effect = { SPELL = global_var:surging_tides }
		assign_spell_to_magic_school_effect = { SPELL = global_var:water_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_water_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_dream_elementals_army }

	}

	global_var:temple_of_the_vitreous_precept = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:shattercurse }
		assign_spell_to_magic_school_effect = { SPELL = global_var:conduit_of_a_clear_mind }
		assign_spell_to_magic_school_effect = { SPELL = global_var:shard_of_imbued_knowledge }
		assign_spell_to_magic_school_effect = { SPELL = global_var:kumhants_veil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:mellifluent_vessel }
		assign_spell_to_magic_school_effect = { SPELL = global_var:ururras_augury }
		assign_spell_to_magic_school_effect = { SPELL = global_var:forge_of_the_solemn_visionary }
		assign_spell_to_magic_school_effect = { SPELL = global_var:supplication_to_the_unfettered_muse }
		assign_spell_to_magic_school_effect = { SPELL = global_var:lacerating_glasswinds }
		assign_spell_to_magic_school_effect = { SPELL = global_var:interminable_nexus }
		assign_spell_to_magic_school_effect = { SPELL = global_var:pane_of_passage }
	}

	global_var:wane_tender_harmoniarchy = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:searing_cleansing }
		assign_spell_to_magic_school_effect = { SPELL = global_var:lustrous_banner }
		assign_spell_to_magic_school_effect = { SPELL = global_var:conjure_salt }
		assign_spell_to_magic_school_effect = { SPELL = global_var:plague_ward }
		assign_spell_to_magic_school_effect = { SPELL = global_var:weapons_of_perdition }
		assign_spell_to_magic_school_effect = { SPELL = global_var:kingsfall }
		assign_spell_to_magic_school_effect = { SPELL = global_var:koshmers_dreaming_archive }
		assign_spell_to_magic_school_effect = { SPELL = global_var:final_emissary_of_peace }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_light_elementals_army }
	}
	
	global_var:auroral_cycle = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:purms_mirthful_beginning }
		assign_spell_to_magic_school_effect = { SPELL = global_var:create_wooden_walls }
		assign_spell_to_magic_school_effect = { SPELL = global_var:barkskin }
		assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
		assign_spell_to_magic_school_effect = { SPELL = global_var:animal_aspect }
		assign_spell_to_magic_school_effect = { SPELL = global_var:hand_spear_and_crown }
		assign_spell_to_magic_school_effect = { SPELL = global_var:imperial_ascension }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sacrifice_rare_herbs }
		assign_spell_to_magic_school_effect = { SPELL = global_var:borrowed_time_march }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sundering_impetus }
		assign_spell_to_magic_school_effect = { SPELL = global_var:surrender_to_the_wild }
		assign_spell_to_magic_school_effect = { SPELL = global_var:concordat_of_dawn_and_stars }
		assign_spell_to_magic_school_effect = { SPELL = global_var:bestirring_of_the_demesne_eternal }
	}
	
	global_var:path_of_the_twin_gods = {
		assign_spell_to_magic_school_effect = { SPELL = global_var:stone_building_construction }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_nature_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:verdant_growth }
		assign_spell_to_magic_school_effect = { SPELL = global_var:nature_wrath }
		assign_spell_to_magic_school_effect = { SPELL = global_var:sacrifice_rare_herbs }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_stone_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:strengthen_soil }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_mountain_spirit_elementals_army }
		assign_spell_to_magic_school_effect = { SPELL = global_var:entangling_vines }
		assign_spell_to_magic_school_effect = { SPELL = global_var:spawn_wild_leshens_armies}
		assign_spell_to_magic_school_effect = { SPELL = global_var:twin_gods_hex_of_wrath}
	}
}

initialize_preset_spells_effect = {
	##########################
	# ====================== #
	# SPECIFIC SCHOOL SPELLS #
	# ====================== #
	##########################
	
	################
	# LIVING MAGIC #
	################
	
	## Rite of the Scarlet King's Feast
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_scarlet_kings_feast ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_life_extension_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_cost_tag_of_last_created_spell = { SCALED_BY = magic_arcane_degeneration_modifier_scale TARGET = target VALUE = 50 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 6 }

	## Invocation of the Wise Mother
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = invocation_of_the_wise_mother ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -5 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 5 }	# Like most invocations, not overchargable by more than +2. Rite of the Iron Vitae is supposed to be the more heavy-duty variant of this
	#scope:new_spell_scope ?= {
	#	create_randomized_spell_component_effect = { NAME = focus_spell_component PICK = 3 REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	#}

	## Invocation of the Red Frenzy
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = invocation_of_the_red_frenzy ASPECT_1 = fire TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -5 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = fire_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }

	## Hex of the Black Vein
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = hex_of_the_black_vein ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 6 }
	scope:new_spell_scope ?= {
		create_poison_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	}
	
	## Humorsurge: Syngos
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = humorsurge_syngos ASPECT_1 = blood TIER_1 = 1 ASPECT_2 = air TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:air THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:air THRESHOLD = -2 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:gregarious
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_social_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:seducer
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }

	## Humorsurge: Elemochis
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = humorsurge_elemochis ASPECT_1 = blood TIER_1 = 1 ASPECT_2 = ice TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:ice THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:ice THRESHOLD = -2 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:shy
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:schemer
		}
	}
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_add_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait
	#	}
	#	set_variable = {
	#		name = activation_condition_trait
	#		value = trait:paranoid
	#	}
	#}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }

	## Humorsurge: Pyrax
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = humorsurge_pyrax ASPECT_1 = blood TIER_1 = 1 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -2 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:ambitious
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:wrathful
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }
	
	## Hex of the Weaksblood Culling
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = hex_of_the_weaksblood_culling ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 5 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_trait_magic_good TARGET = target }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	
	## Phylactery of the Nightowl's Eye
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_nightowls_eye ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = dream TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }

	## Phylactery of the Carmine Ink
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_carmine_ink ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = celestial TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }

	## Phylactery of the Oxen's Heart
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_oxens_heart ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_viagra_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = 2 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }

	## Phylactery of the Burnt Laurel
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_burnt_laurel ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_diplomacy_magic_modifier_vassal_opinion_positive TARGET = target SCALED_BY = flag:fire THRESHOLD = 2 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }

	## Phylactery of the Gilded Olive
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_gilded_olive ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = metal TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_capital_county_monthly_development_growth_add_modifier TARGET = target SCALED_BY = flag:metal THRESHOLD = 1 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }
		
	## Phylactery of the Foolsblood Ashes
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_foolsblood_ashes ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = fire TIER_2 = 1 }
	scope:new_spell_scope ?= {
		create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
		if = {
			limit = { exists = scope:character_prisoner_scope }
			scope:character_prisoner_scope = {
				add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
				set_variable = consumes_input
				add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
				add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = impatient VALUE = 2 }
				add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = arrogant VALUE = 2 }
				add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = trusting VALUE = 2 }
			}
		}
		create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 20 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_component
			value = scope:character_prisoner_scope
		}
	}
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = fire_max VALUE = 1 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }	

	## Phylactery of the Troll's Blood
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_trolls_blood ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = nature TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_levy_reinforcement_rate_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hard_casualty_modifier_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }

	## Phylactery of the Hyacinth Wine
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = phylactery_of_the_hyacinth_wine ASPECT_1 = blood TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_close_relative_opinion_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_child_opinion_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }

	## Humor Tranfusion: Syngos
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = humor_transfusion_syngos ASPECT_1 = blood TIER_1 = 4 ASPECT_2 = air TIER_2 = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_variable = { name = blood_max value = 4 }
			set_variable = { name = air_max value = 2 }
			create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
			if = {
				limit = { exists = scope:character_prisoner_scope }
				scope:character_prisoner_scope = {
					add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
					set_variable = consumes_input
					add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = gregarious VALUE = 2 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = lustful VALUE = 2 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = gluttonous VALUE = 2 }
				}
			}
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_diplomacy_lifestyle_xp TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_spell_cost_tag_of_last_created_spell = { SCALED_BY = magic_arcane_degeneration_modifier_scale TARGET = target VALUE = 25 }

	## Humor Tranfusion: Elemochis
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = humor_transfusion_elemochis ASPECT_1 = blood TIER_1 = 4 ASPECT_2 = ice TIER_2 = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_variable = { name = blood_max value = 4 }
			set_variable = { name = ice_max value = 2 }
			create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
			if = {
				limit = { exists = scope:character_prisoner_scope }
				scope:character_prisoner_scope = {
					add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
					set_variable = consumes_input
					add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = shy VALUE = 2 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = lazy VALUE = 2 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = content VALUE = 2 }
				}
			}
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_learning_lifestyle_xp TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_spell_cost_tag_of_last_created_spell = { SCALED_BY = magic_arcane_degeneration_modifier_scale TARGET = target VALUE = 25 }

	## Humor Tranfusion: Pyrax
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = humor_transfusion_pyrax ASPECT_1 = blood TIER_1 = 4 ASPECT_2 = fire TIER_2 = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_variable = { name = blood_max value = 4 }
			set_variable = { name = fire_max value = 2 }
			create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
			if = {
				limit = { exists = scope:character_prisoner_scope }
				scope:character_prisoner_scope = {
					add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
					set_variable = consumes_input
					add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = wrathful VALUE = 2 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = impatient VALUE = 2 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait IDENTIFIER = ambitious VALUE = 2 }
				}
			}
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_modifier TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_martial_lifestyle_xp TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_spell_cost_tag_of_last_created_spell = { SCALED_BY = magic_arcane_degeneration_modifier_scale TARGET = target VALUE = 25 }
	
	## Formula Bola Aimatos
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_bola_aimatos ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = death TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_undead_skirmishers TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_elite_undead TARGET = target SCALED_BY = flag:death THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_undead_improvement_add_modifier TARGET = target SCALED_BY = flag:death THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	
	## Formula Paeda Alikou 
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_paeda_alikou ASPECT_1 = blood TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_blood_elementals TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_magical_improvement_add_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_blood TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	## Formula Pyrovestis Ypallos
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_pyrovestis_ypallos ASPECT_1 = fire TIER_1 = 3 ASPECT_2 = blood TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_fire_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_magical_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_fire TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	## Formula Ionimo Edos
	# A derivative of the Scarlet King's Harvest which is tenfold cheaper, but requires more mana and is also vastly more difficult
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_ionimo_edos ASPECT_1 = blood TIER_1 = 6 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_excellent_soil_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }	
	set_spell_cost_of_last_created_spell_effect = { VALUE = 100 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }

	## Formula Krysos Aima
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_krysos_aima ASPECT_1 = blood TIER_1 = 5 ASPECT_2 = stone TIER_2 = 1 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
			if = {
				limit = { exists = scope:character_prisoner_scope }
				scope:character_prisoner_scope = {
					add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
					set_variable = consumes_input
					add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait_group IDENTIFIER = magic_good_1 VALUE = 2 }
				}
			}
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:spell_component_suitability THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	
	## Formula Alikarchex Nea
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_alikarchexes_nea ASPECT_1 = blood TIER_1 = 3 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = low_spell_gold_cost }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_life_extension_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:magic_arcane_degeneration_modifier_scale THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_variable = { name = blood_max value = 3 }
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}

	## Formula Tetrita Aima
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = formula_tetrita_aima ASPECT_1 = blood TIER_1 = 5 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = low_spell_cost }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_genetics_positive_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	
	# Procedure of the Heart Unvanquished
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = procedure_of_the_heart_unvanquished ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = fire TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 50 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_incapacitation_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_leper TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 75 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 5 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:leper
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_cancer TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 50 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 10 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:cancer
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_infirm TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 5 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:infirm
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_incapable TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 2 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:incapable
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_incapable TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 0 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait_negative
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:incapable
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_lunatic_1 TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 5 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait_negative
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:lunatic_1
		}
	}
	
	## Pelinosian Procedure
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = pelinosian_procedure ASPECT_1 = blood TIER_1 = 5 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
			if = {
				limit = { exists = scope:character_prisoner_scope }
				scope:character_prisoner_scope = {
					add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
					set_variable = consumes_input
					add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
					add_spell_component_input_slot_modifier_effect = { TYPE = trait_group IDENTIFIER = magic_good_1 VALUE = 2 }
				}
			}
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_magic_baseline_positive TARGET = target SCALED_BY = flag:spell_component_suitability THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_component VALUE = scope:character_prisoner_scope }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_blood TARGET = target SCALED_BY = flag:blood THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	
	## Cupbearer's Ward
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = cupbearers_ward ASPECT_1 = blood TIER_1 = 1 ASPECT_2 = stone TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = resist_poison TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	#scope:new_tag ?= {
	#	set_variable = {
	#		name = spell_effect_chance
	#		value = 50
	#	}
	#}
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_poisoned TARGET = caster }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = cantrip }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = increase_court_position_aptitude }
	#scope:new_tag ?= {
	#	set_variable = {
	#		name = cupbearer_court_position
	#		value = 10
	#	}
	#}
	
	## Makleanic Hex
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = makleanic_hex ASPECT_1 = blood TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:blood THRESHOLD = 3 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 30 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 10 }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_has_trait_wounded TARGET = target }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:miscast }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 4 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}
	
	## Xenophoric Mark of Hatred
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = xenophoric_mark_of_hatred ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_internal_strife_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_character_county_opinion_negative_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}
	
	## Eramos' Call to Sword and Hammer
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = eramos_call_to_sword_and_hammer ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_capital_county_monthly_development_growth_add_modifier TARGET = caster SCALED_BY = flag:stone THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_men_at_arms_recruitment_cost_positive_modifier TARGET = caster SCALED_BY = flag:stone THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_positive TARGET = caster SCALED_BY = flag:stone THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_external_condemnation_modifier TARGET = caster SCALED_BY = flag:stone THRESHOLD = -6 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}

	## Invocation of the Quickened Vitae
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = invocation_of_the_quickened_vitae ASPECT_1 = blood TIER_1 = 1 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_lifestyle_xp_gain_mult_modifier TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_mind_fog_modifier TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 15 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_variable = { name = blood_max value = 3 }
			set_variable = { name = fire_max value = 2 }
		}
	}
	
	## Invocation of the Five Words of Passion
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = invocation_of_the_five_words_of_passion ASPECT_1 = blood TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_social_gain_modifier TARGET = caster SCALED_BY = flag:blood THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_seduce_scheme_power_add_modifier TARGET = caster SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_mind_fog_modifier TARGET = caster SCALED_BY = flag:blood THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = caster SCALED_BY = flag:blood THRESHOLD = 0 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 15 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_variable = { name = blood_max value = 5 }
		}
	}
	
	## Kydelan Procedure
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = kydelan_procedure ASPECT_1 = blood TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_physical_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait_negative
		}
		set_variable = {
			name = activation_condition_trait_negative
			value = trait:disfigured
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_scarred TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_xp_change_override VALUE = -5 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait_negative
		}
		set_variable = {
			name = activation_condition_trait_negative
			value = trait:disfigured
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_disfigured TARGET = target SCALED_BY = flag:blood THRESHOLD = 8 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_bodily_modification_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 8 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:disfigured
		}
	}
	set_spell_cost_of_last_created_spell_effect = { VALUE = 25 }

	## Rite of the Kothexa's Kiss
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = hex_of_the_kothexas_kiss ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 50 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 10 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_intimate_relation_to_caster TARGET = target }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	
	## Rite of the Cradle's Blessing
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_cradles_blessing ASPECT_1 = blood TIER_1 = 4 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_has_trait_pregnant TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_childbirth TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = lifespan VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_diplomacy_skill TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_intrigue_skill TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_stewardship_skill TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_martial_skill TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_learning_skill TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_prowess_skill TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_magic_good TARGET = target_newborn_child SCALED_BY = flag:blood THRESHOLD = 3 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:blood THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = sanity_loss TARGET = target SCALED_BY = flag:blood THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_magic_good TARGET = target SCALED_BY = flag:blood THRESHOLD = 5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_magic_good TARGET = caster SCALED_BY = flag:blood THRESHOLD = 6 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = caster SCALED_BY = flag:blood THRESHOLD = 6 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 20 }
	
	## Rite of the Iron Vitae
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_iron_vitae ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	
	## Rite of the Red Chain
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_red_chain ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_with_secondary_target_to_last_created_spell_scripted_effect = { NAME = dominate_character TARGET = spell_organizer SECOND_TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_mind_fog_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 3 }

	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = oracle_of_the_abattoir_sky ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_murder_scheme_power_add_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -7 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_loss_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_scheme_discovery_chance_mult_loss_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -2 }
	
	## Rite of the Violet Chalice
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_violet_chalice ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_with_secondary_target_to_last_created_spell_scripted_effect = { NAME = dominate_character TARGET = spell_organizer SECOND_TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_with_secondary_target_to_last_created_spell_scripted_effect = { NAME = dominate_character TARGET = target SECOND_TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}

	## Oath of Ster Valthronax
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = oath_of_soter_valthronax ASPECT_1 = fire TIER_1 = 4 ASPECT_2 = blood TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	scope:new_spell_scope ?= {
		set_variable = { name = fire_max value = 4 }
		set_variable = { name = blood_max value = 2 }
	}
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Mysteries of Megarea
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mysteries_of_megarea ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = fire TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_prestige_gain_per_dread_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_dread_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Mysteries of Mnestra Kosalis
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mnestra_kosalosis_mysteries ASPECT_1 = dawn TIER_1 = 3 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_spell_scope ?= {
		set_variable = { name = dawn_max value = 3 }
		set_variable = { name = blood_max value = 1 }
	}
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Rite of Hatznur's Bounty
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_hatznurs_bounty ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:blood THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_excellent_soil_modifier TARGET = target_title SCALED_BY = flag:stone THRESHOLD = 0 }	
	set_spell_cost_of_last_created_spell_effect = { VALUE = 50 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_high_spell_gold_cost }
	scope:new_spell_scope ?= {
		set_variable = { name = blood_max value = 5 }
		set_variable = { name = stone_max value = 3 }
	}
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Rite of Pollidides' Guiding Lamp
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_pollidides_guiding_lamp ASPECT_1 = fire TIER_1 = 2 ASPECT_2 = dawn TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_travel_safety_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_travel_speed_mult_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:dawn THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:dawn THRESHOLD = -1 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Perioikena's Hearthfire Ceremony
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = perioikenas_hearthfire_ceremony ASPECT_1 = light TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:family_first
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_add_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 0 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:content
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_spouse_opinion_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_child_opinion_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_viagra_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = -4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:chaste
		}
	}
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Mephrian Revelry
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mephrian_revelry ASPECT_1 = blood TIER_1 = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_activity_host_prestige_reward TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = -2 }
	##add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_activity_participant_stress_loss TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = -4 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_lifestyle_reveler TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 1 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_xp_change_override VALUE = 10 }
	## Gregarious Effects
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gregarious TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait_negative
	#	}
	#	set_variable = {
	#		name = activation_condition_trait_negative
	#		value = trait:gregarious
	#	}
	#}
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait
	#	}
	#	set_variable = {
	#		name = activation_condition_trait
	#		value = trait:gregarious
	#	}
	#}
	## Gluttonous Effects
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gluttonous TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait_negative
	#	}
	#	set_variable = {
	#		name = activation_condition_trait_negative
	#		value = trait:gluttonous
	#	}
	#}
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait
	#	}
	#	set_variable = {
	#		name = activation_condition_trait
	#		value = trait:gluttonous
	#	}
	#}
	## Lustful Effects
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_lustful TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait_negative
	#	}
	#	set_variable = {
	#		name = activation_condition_trait_negative
	#		value = trait:lustful
	#	}
	#}
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_social_gain_modifier TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait
	#	}
	#	set_variable = {
	#		name = activation_condition_trait
	#		value = trait:lustful
	#	}
	#}
	## Drunkard Effects
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_drunkard TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 5 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 5 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait_negative
	#	}
	#	set_variable = {
	#		name = activation_condition_trait_negative
	#		value = trait:drunkard
	#	}
	#}
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = spell_organizer SCALED_BY = flag:blood THRESHOLD = 2 }
	#scope:new_tag ?= {
	#	add_to_variable_list = {
	#		name = activation_condition_list
	#		target = flag:trait
	#	}
	#	set_variable = {
	#		name = activation_condition_trait
	#		value = trait:drunkard
	#	}
	#}
	## Casting Requirements
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_hosting_activity_feast TARGET = spell_organizer }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_hosting_activity_wedding TARGET = spell_organizer }
	#set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Rite of the Farseeing Chalice
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_farseeing_chalice ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_monthly_county_control_growth_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }

	## Rite of the False Dragonflame
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_false_dragonflame ASPECT_1 = fire TIER_1 = 3 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magi_siege_value_add_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hard_casualty_modifier_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}

	## Rite of the Vortex of Imperial Wrath
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_vortex_of_imperial_wrath ASPECT_1 = fire TIER_1 = 3 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:fire THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = destroy_random_building TARGET = target_province SCALED_BY = flag:fire THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = damage_army TARGET = target_province SCALED_BY = flag:fire THRESHOLD = 0 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = reduce_development_add_arcane_fallout TARGET = target_title SCALED_BY = flag:fire THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:fire THRESHOLD = 0 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = death_effect_add_trait_wounded TARGET = target_province_character SCALED_BY = flag:fire THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 1 }

	## Rite of Mithorxa's Embrace
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_mithorxas_embrace ASPECT_1 = ice TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	#add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = reduce_development_add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_destroyed_buildings_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Rite of the Healer's Radiance
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_healers_radiance ASPECT_1 = blood TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hard_casualty_modifier_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_levy_reinforcement_rate_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Oath of the Unwavering Legionnaire
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = oath_of_the_unwavering_legionnaire ASPECT_1 = blood TIER_1 = 3 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_heavy_infantry_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Rite of the Pooled Blood
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_pooled_blood ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_magi_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_magi_siege_value_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }

	## Heartsong of Ietros
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = heartsong_of_ietros ASPECT_1 = blood TIER_1 = 4 ASPECT_2 = hymns TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_epidemic_resistance_gain_modifier TARGET = target_title SCALED_BY = flag:blood THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_county_opinion_add_modifier TARGET = target_title SCALED_BY = flag:hymns THRESHOLD = 0 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:aversarinas_aagiokrata }

	## Seal of the Red Madness
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = seal_of_the_red_madness ASPECT_1 = fire TIER_1 = 4 ASPECT_2 = blood TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_monthly_county_control_decline_add_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_county_opinion_loss_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of the Gortillian Inititate
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_the_magnantinian_sisterhood ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_blood TARGET = target SCALED_BY = flag:blood THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_fire TARGET = target SCALED_BY = flag:blood THRESHOLD = 0 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:blood THRESHOLD = -1 }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_maxed_out_gh_ritual_tattoos_track TARGET = target }
	#add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 3 }
	#set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	#set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }

	## Mark of the Magnantinian Sisterhood
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_the_magnantinian_sisterhood ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_blood TARGET = target SCALED_BY = flag:blood THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_spell_to_tattoo_list TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_female TARGET = target }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_tattoo_of_ritual TARGET = target }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_maxed_out_gh_ritual_tattoos_track TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 3 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	
	## Mark of the Dragonrider
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_the_dragonrider ASPECT_1 = fire TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_fire TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_prowess_skill TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_minor_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_spell_to_tattoo_list TARGET = target SCALED_BY = flag:fire THRESHOLD = 0 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_tattoo_of_ritual TARGET = target }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_maxed_out_gh_ritual_tattoos_track TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = fire_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 1 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }

	## Soteric Mysteries
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = soteric_mysteries ASPECT_1 = fire TIER_1 = 2 ASPECT_2 = blood TIER_2 = 2 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_martial_per_piety_level TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 6 }

	## Hex of Boiling Blood
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_unraveling_flesh ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_chance TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	#add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_wounding TARGET = target }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:miscast }
		
	### Glamour of Irresistible Beauty
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_unraveling_flesh ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_chance TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	#add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_wounding TARGET = target }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:miscast }

	##############
	# DEAD MAGIC #
	##############
	
	## Sigil of Soter's Shield
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sigil_soters_shield ASPECT_1 = stone TIER_1 = 2 ASPECT_2 = light TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_heavy_infantry_improvement_add_modifier TARGET = target SCALED_BY = flag:stone THRESHOLD = -3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_knight_effectiveness_magic_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}

	## Naupyrnan Octagram
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sigil_naupyrnan_octagram ASPECT_1 = stone TIER_1 = 2 ASPECT_2 = celestial TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = high_spell_gold_cost }	
	add_variable_to_last_created_spell = { VARIABLE_TYPE = stone_max VALUE = 2 }
	
	## Sigil of the Three-Lobed Walnut
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sigil_three_lobed_walnut ASPECT_1 = stone TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_fort_creation_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	
	## Sigil of the Sundered Three-Lobed Walnut
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sigil_sundered_three_lobed_walnut ASPECT_1 = stone TIER_1 = 1 ASPECT_2 = death TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_siege_weapon_siege_value_add_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = stone_max VALUE = 1 }
	
	## Ward of the Ashen Key
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ward_of_the_ashen_key ASPECT_1 = stone TIER_1 = 2 ASPECT_2 = death TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hostile_scheme_discovery_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Technique of the Twelve Folds
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = technique_of_the_twelve_folds ASPECT_1 = metal TIER_1 = 1 ASPECT_2 = stone TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_artifact_modifier_magic_prowess_gain_modifier TARGET = target_artifacts SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_under_enchantment_limit TARGET = target_artifacts }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_artifact_feature_blade_metal_iron TARGET = target_artifacts }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = stone_max VALUE = 2 }
	
	## Sigil of the Widow's Iron
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sigil_of_the_widows_iron ASPECT_1 = metal TIER_1 = 1 ASPECT_2 = death TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_artifact_modifier_magic_prowess_gain_modifier TARGET = target_artifacts SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_under_enchantment_limit TARGET = target_artifacts }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = casting_condition_artifact_feature_blade_metal_iron TARGET = target_artifacts }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = death_max VALUE = 2 }
	
	## Rite of the Aspomnoxian Earthshakers
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_aspomnoxian_earthshakers ASPECT_1 = stone TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_destroyed_buildings_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = -1 }

	## Rite of the Diminished Aervalrshard 
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_diminished_aervalrshard ASPECT_1 = death TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:stone THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_intrigue_lifestyle_xp TARGET = target SCALED_BY = flag:death THRESHOLD = -2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = stone_max VALUE = 1 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	
	## Aspomnoxian Transmutation: Stone to Iron
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = precious_metal_transmutation ASPECT_1 = metal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_exotic_metals_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	
	#######################
	# SCHOOL OF REJECTION #
	#######################

	## Corrupted Elegy of the Wise King
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = corrupted_elegy_of_the_wise_king ASPECT_1 = dark TIER_1 = 3 ASPECT_2 = ethereal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 20 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	
	## Corrupted Elegy of the Dutiful Smith
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = corrupted_elegy_of_the_dutiful_smith ASPECT_1 = dark TIER_1 = 3 ASPECT_2 = ethereal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 20 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }

	## Rite of the Grand Awakening
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rite_of_the_grand_awakening ASPECT_1 = death TIER_1 = 3 ASPECT_2 = dark TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_undead_skirmishers TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_undead_bowmen TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	#################################################
	# ILLUMINATED ORDER OF THE MOST HOLY PRINCIPLES #
	#################################################
	
	## Charting of the Star-Guided Path
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = charting_of_the_star_guided_path ASPECT_1 = celestial TIER_1 = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = rank_up_education_effect TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	#add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_less_than_age TARGET = target }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = age VALUE = childhood_education_start_age }
	#add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_greater_than_age TARGET = target }
	#add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = age VALUE = 16 }
	#set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	#set_spell_gold_cost_of_last_created_spell_effect = { VALUE = low_spell_gold_cost }
	#add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 3 }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Star Card Reading: Five Queen Deck
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tarot_quin_rois ASPECT_1 = celestial TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 3 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Star Card Reading: Gisredde Deck
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tarot_gisredde_deck ASPECT_1 = celestial TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_income_gain_mult_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:celestial THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 2 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Star Card Reading: Raocourt Deck
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tarot_raocourt ASPECT_1 = light TIER_1 = 2 ASPECT_2 = celestial TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:lifepath }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 1 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Star Card Reading: Forbidden Deck
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tarot_forbanne ASPECT_1 = celestial TIER_1 = 2 ASPECT_2 = death TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:death THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_murder_scheme_power_add_modifier TARGET = target SCALED_BY = flag:death THRESHOLD = -2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:death THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:death THRESHOLD = 3 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 4 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = death_max VALUE = 5 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Narghille Mysticalis
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = narghile_mysticalis ASPECT_1 = celestial TIER_1 = 2 ASPECT_2 = dream TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_relevant_lifestyle_xp TARGET = target SCALED_BY = flag:dream THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_mind_fog_modifier TARGET = target SCALED_BY = flag:dream THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_loss TARGET = target SCALED_BY = flag:dream THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:hashishiyah
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:dream THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:lifestyle_mystic
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_hashishiyah TARGET = target SCALED_BY = flag:dream THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_lifestyle_mystic TARGET = target SCALED_BY = flag:dream THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 25 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_character_modifier_magic_mind_fog_modifier TARGET = target }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = death_max VALUE = 5 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Four Chants and Three Rites of Miasmic Purge
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = four_chants_and_three_rites_of_miasmic_purge ASPECT_1 = blood TIER_1 = 2 ASPECT_2 = light TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_epidemic_resistance_gain_modifier TARGET = target_title SCALED_BY = flag:blood THRESHOLD = 0 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 1 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }

	## Mark of the Star Reader
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_the_star_reader ASPECT_1 = celestial TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_celestial TARGET = target SCALED_BY = flag:celestial THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_lifestyle_mystic TARGET = target SCALED_BY = flag:celestial THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_negative TARGET = target SCALED_BY = flag:celestial THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:celestial THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_spell_to_tattoo_list TARGET = target SCALED_BY = flag:celestial THRESHOLD = 2 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_tattoo_of_ritual TARGET = target }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_maxed_out_gh_ritual_tattoos_track TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 3 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }

	## Mark of the Orcindian Order
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_the_orcindian_order ASPECT_1 = light TIER_1 = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_light TARGET = target SCALED_BY = flag:light THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_prowess_skill TARGET = target SCALED_BY = flag:light THRESHOLD = 2 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:brave
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_diplomacy_skill TARGET = target SCALED_BY = flag:light THRESHOLD = 3 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:compassionate
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_diplomacy_skill TARGET = target SCALED_BY = flag:light THRESHOLD = 3 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:compassionate
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_prowess_skill TARGET = target SCALED_BY = flag:light THRESHOLD = 4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:compassionate
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_stewardship_skill TARGET = target SCALED_BY = flag:light THRESHOLD = 3 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:just
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_prowess_skill TARGET = target SCALED_BY = flag:light THRESHOLD = 4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:just
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_all_skills TARGET = target SCALED_BY = flag:light THRESHOLD = 4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:craven
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_all_skills TARGET = target SCALED_BY = flag:light THRESHOLD = 4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:sadistic
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_all_skills TARGET = target SCALED_BY = flag:light THRESHOLD = 4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:callous
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_all_skills TARGET = target SCALED_BY = flag:light THRESHOLD = 4 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:arbitrary
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:fire THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_spell_to_tattoo_list TARGET = target SCALED_BY = flag:fire THRESHOLD = 2 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_tattoo_of_ritual TARGET = target }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_maxed_out_gh_ritual_tattoos_track TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 5 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:lifepath }
	
	## Dowsing Rod of Witch Hazel
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = dowsing_rod_of_witch_hazel ASPECT_1 = stone TIER_1 = 2 ASPECT_2 = celestial TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_exotic_metals_modifier TARGET = target_title SCALED_BY = flag:stone THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:stone THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = very_low_spell_gold_cost }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = stone_max VALUE = 1 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }

	## Baume Conscrationis
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = baume_consecrationis ASPECT_1 = light TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_per_piety_level_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_resistance_magic_modifier TARGET = target SCALED_BY = flag:light THRESHOLD = 3 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 25 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 7 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:lifepath }
	
	# Tabela Oejeynicaise
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tabela_oejeynicaise ASPECT_1 = ethereal TIER_1 = 1 ASPECT_2 = celestial TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = spell_organizer SCALED_BY = flag:ethereal THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 25 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = spell_organizer SCALED_BY = flag:ethereal THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 25 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reveal_secret TARGET = target_province_character SCALED_BY = flag:ethereal THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 20 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 25 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_possessed_1 TARGET = caster SCALED_BY = flag:ethereal THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 2 }
	set_spell_cost_of_last_created_spell_effect = { VALUE = 25 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = celestial_max VALUE = 1 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }

	##################
	# ============== #
	# GENERIC SPELLS #
	# ============== #
	##################

	###################
	### Blood Aspect###
	###################

	##Blood Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_blood_elementals_army ASPECT_1 = blood TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_blood_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = { 
		limit = { exists = scope:new_spell_scope } 
		scope:new_spell_scope = { 
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }			
		} 
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
			set_variable = {
				name = spell_effect_chance
				value = 25
			}
		}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_blood TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }


	# Ritual Bloodletting
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ritual_bloodletting ASPECT_1 = blood TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = caster SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_wounded TARGET = caster SCALED_BY = flag:none THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = caster SCALED_BY = flag:blood THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = caster SCALED_BY = flag:blood THRESHOLD = 0 }
	scope:new_spell_scope ?= {
		create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		create_sedative_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	}
	set_spell_cost_of_last_created_spell_effect = { VALUE = 0 }
	
	# Ritual Sacrifice
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ritual_sacrifice ASPECT_1 = blood TIER_1 = 1 }
	scope:new_spell_scope ?= {
		create_spell_component_effect = { COMPONENT_NAME = character_prisoner REQUIRED = yes }
		scope:character_prisoner_scope ?= {
			add_spell_component_input_slot_effect = { TYPE = character_spell_component_input }
			add_spell_component_bonus_or_cost_effect = { TYPE = blood VALUE = 1 }
			set_variable = consumes_input
			add_spell_component_input_slot_modifier_effect = { TYPE = status IDENTIFIER = imprisoned VALUE = 0 }
			add_spell_component_input_slot_modifier_effect = { TYPE = trait_group IDENTIFIER = magic_good_1 VALUE = 1 }
		}
		create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = caster SCALED_BY = flag:blood THRESHOLD = 0 }
	add_spell_tag_to_last_created_spell_scripted_effect = { NAME = generation }

	# Five Torments Procedure
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = five_torments_procedure ASPECT_1 = blood TIER_1 = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = generate_magic_from_components TARGET = caster SCALED_BY = flag:blood THRESHOLD = -2 }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = generation }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = sadistic_effects }
	#if = {
	#	limit = { exists = scope:new_spell_scope }
	#	scope:new_spell_scope = {
	#		create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = magic_add REWARD_AMOUNT = 1 REQUIRED = yes }
	#		# create_sacrificer_spell_component_effect = { REWARD_TYPE = magic_mult REWARD_AMOUNT = 1 REQUIRED = yes }
	#		create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	#		set_spell_cost_effect = { VALUE = 0 }
	#	}
	#}
	
	## Arcane Meditation
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = arcane_meditation ASPECT_1 = blood TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_mind_fog_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}

	## Arcane Virility
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = arcane_virility ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_viagra_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}
	
	## Healing Water
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = healing_water ASPECT_1 = blood TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}
	
	## Poison Blood
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = poison_blood ASPECT_1 = blood TIER_1 = 1 ASPECT_2 = nature TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}
	
	## Haruspicy
	# GH TODO: Reimplement with proper divination
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = haruspicy ASPECT_1 = blood TIER_1 = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_random_divination_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	#if = {
	#	limit = { exists = scope:new_spell_scope }
	#	scope:new_spell_scope = {
	#		create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
	#	}
	#}
	
	## Mending
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mending ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}
	
	## Rejuvenating Blood
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rejuvenating_blood ASPECT_1 = blood TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hard_casualty_modifier_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_levy_reinforcement_rate_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}
	
	## Raise Bloodthralls
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = raise_bloodthralls ASPECT_1 = blood TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_undead_skirmishers TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_elite_undead TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_undead_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}

	## Blood Rage
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = blood_rage_spell ASPECT_1 = blood TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_knight_effectiveness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hard_casualty_modifier_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}

	## Auspex of Temptation
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = auspex_of_temptation ASPECT_1 = blood TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_social_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }  
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}

	## Vampirism
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = vampirism ASPECT_1 = blood TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_life_extension_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_arcane_degeneration_modifier TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_cost_tag_of_last_created_spell = { SCALED_BY = magic_arcane_degeneration_modifier_scale TARGET = target VALUE = 50 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }
		}
	}

	## Domination
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = domination ASPECT_1 = blood TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = dominate_character TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			create_sacrificial_dagger_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}

	###################
	### Fire Aspect ###
	###################

	## Combat Pyromantics
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = combat_pyromantics ASPECT_1 = fire TIER_1 = 2 }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = duel_magic }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = cantrip }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = adjust_duel_success_chance TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = adjust_duel_risk_of_injury TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	#set_spell_cost_of_last_created_spell_effect = { VALUE = 10 }
	#set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	

	## Fire Magic
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = fire_magick ASPECT_1 = fire TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_dry_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magi_siege_value_add_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
		
	## Magistrength
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = magistrength ASPECT_1 = fire TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
		
	## Firestorm
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = firestorm ASPECT_1 = fire TIER_1 = 3 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = reduce_development_add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Solar Bombardment
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = solar_bombardment ASPECT_1 = light TIER_1 = 2 ASPECT_2 = fire TIER_2 = 2 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = reduce_development_add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Auspex of War
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = auspex_of_war ASPECT_1 = fire TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }  

	## Fire Refurbishment
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = fire_healing ASPECT_1 = fire TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	## Vitalize Livestock
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = vitalize_livestock ASPECT_1 = fire TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_reduce_control_livestock TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	## Scorching Sun
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = drought_fire ASPECT_1 = fire TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_drought TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	## Woodland Inferno
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = woodland_inferno  ASPECT_1 = fire TIER_1 = 2 ASPECT_2 = nature TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_dry_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magi_siege_value_add_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_forest_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:nature THRESHOLD = 0 }

	## Animate Magma Golems
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_magma_golem_armies ASPECT_1 = fire TIER_1 = 3 ASPECT_2 = stone TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_magma_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_siege_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_constructs_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
			set_variable = {
				name = spell_effect_chance
				value = 25
			}
		}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_fire TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	##Fire Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_fire_elementals_army ASPECT_1 = fire TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_fire_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_magical_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
			set_variable = {
				name = spell_effect_chance
				value = 25
			}
		}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_fire TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	## Dragon's Roar
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = dragons_roar ASPECT_1 = fire TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
 
	####################
	### Water Aspect ###
	####################

	## Arcane Irrigation
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = arcane_irrigation ASPECT_1 = water TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_excellent_soil_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Auspex of Flowing Life
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = auspex_of_diplomacy ASPECT_1 = water TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }  

	##	Water Strider
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = water_strider ASPECT_1 = water TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_negate_enemy_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_water_magic_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Water Healing
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = water_healing ASPECT_1 = water TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	## add_county_modifier_reduce_agriculture_magic_modifier From Water-loss
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = drought_water ASPECT_1 = water TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_drought TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Calming Waters
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = calming_waters ASPECT_1 = water TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_loss TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_loss_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_positive TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Water Veil
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = water_veil ASPECT_1 = water TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_resistance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Rejuvenation
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rejuvenation ASPECT_1 = water TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_general_opinion_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_physical_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Riverine Rush
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = riverine_rush ASPECT_1 = water TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_water_magic_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_sailing_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:water THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	## Fluvial Restoration
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = fluvial_restoration ASPECT_1 = water TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_loss TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	## Blessing of the Kasiryat
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = blessing_of_the_kasiryat ASPECT_1 = water TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_general_opinion_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_attraction_opinion_physical_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_realm_opinion_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }

	## Anger of the Sea Queen
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = anger_of_the_sea_queen ASPECT_1 = water TIER_1 = 2 ASPECT_2 = hymns TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_sailing_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_county_travel_danger_disadvantage_modifier TARGET = target SCALED_BY = flag:hymns THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_water_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	

	## Calming of the Sea Queen
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = calming_of_the_sea_queen ASPECT_1 = water TIER_1 = 2 ASPECT_2 = hymns TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_sailing_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_county_travel_danger_advantage_modifier TARGET = target SCALED_BY = flag:hymns THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_water_magic_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	
	### Water Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_water_elementals_army ASPECT_1 = water TIER_1 = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_water_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_water TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
 
	## Surging Tides
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = surging_tides ASPECT_1 = water TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_water_magic_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_sailing_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:water THRESHOLD = 1 }

	## Create Morass
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = create_morass ASPECT_1 = water TIER_1 = 2 ASPECT_2 = stone TIER_2 = 2  }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_slow_army_movement_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_negative_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	####################
	### Light Aspect ###
	####################

	## Auspex of Universal Mind
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = auspex_of_learning ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }  

	## Enforce Fortress
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = light_fortress ASPECT_1 = light TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_defensive_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_fort_creation_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_reduce_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## add_county_modifier_reduce_agriculture_magic_modifier From Increased Sunlight
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = drought_light ASPECT_1 = light TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_drought TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	# Laser spell
	##Focus Sun-death
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = laser_beam ASPECT_1 = light TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_knight_effectiveness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Create Guiding Light
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = guiding_light ASPECT_1 = light TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_general_boost TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Create Nourishing Radiance
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = nourishing_radiance ASPECT_1 = light TIER_1 = 2 ASPECT_2 = nature TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_verdant_plant_growth_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Prismatic Ward
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = prismatic_ward ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_resistance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Freouin's Dispelling Blade
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = dispelling_blade ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_penetration_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Freouin's Revealing Blade
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = revealing_blade ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hostile_scheme_discovery_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Eternal Day
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = eternal_day ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_county_illuminated_night_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_county_light_pollution_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Ohrasik's ferver
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ohrasiks_fervor ASPECT_1 = light TIER_1 = 1 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_religious_fanaticism TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	##Seraph Melacham
 	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_seraph_melacham_army ASPECT_1 = light TIER_1 = 4 ASPECT_2 = celestial TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_seraph_melacham TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
  	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_flying_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
			set_variable = {
				name = spell_effect_chance
				value = 25
			}
		}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_light TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_celestial TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Light Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_light_elementals_army ASPECT_1 = light TIER_1 = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_light_elementals TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = spell_organizer SCALED_BY = flag:none THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_light TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 10 }

	### Salt Spells

	## Searing Cleansing
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = searing_cleansing ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_minor_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 5 }

	## Lustrous Banner
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = lustrous_banner ASPECT_1 = light TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = knight_summons TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_levy_reinforcement_rate_gain_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 4 }

	## Conjure Salt
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = conjure_salt ASPECT_1 = light TIER_1 = 1 ASPECT_2 = sand TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_capital_county_monthly_development_growth_add_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = sand_max VALUE = 2 }

	## Plague Ward
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = plague_ward ASPECT_1 = light TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_epidemic_resistance_gain_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_county_opinion_loss_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 5 }

	## Weapons of Perdition
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = weapons_of_perdition ASPECT_1 = light TIER_1 = 1 ASPECT_2 = sand TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enhanced_fatality_modifier TARGET = spell_organizer SCALED_BY = flag:light THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = spell_organizer SCALED_BY = flag:sand THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = sand_max VALUE = 3 }

	## Kingsfall
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = kingsfall ASPECT_1 = sand TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_internal_strife_modifier TARGET = target SCALED_BY = flag:sand THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_tyranny_modifier TARGET = target SCALED_BY = flag:fire THRESHOLD = -1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = sand_max VALUE = 5 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = fire_max VALUE = 3 }

	## Koshmer's Dreaming Archive
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = koshmers_dreaming_archive ASPECT_1 = light TIER_1 = 1 ASPECT_2 = dream TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_lifestyle_physician TARGET = target SCALED_BY = flag:none THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_lifestyle_physician TARGET = target SCALED_BY = flag:light THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_relevant_lifestyle_xp TARGET = target SCALED_BY = flag:num_of_known_languages THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dream_max VALUE = 1 }

	## Final Emissary
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = final_emissary_of_peace ASPECT_1 = light TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_vassalization_acceptance_modifier TARGET = spell_organizer SCALED_BY = flag:light THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_dread_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = light_max VALUE = 6 }

	##################
	### Air Aspect ###
	##################

	
	##Lightning Elementals
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_lightning_elementals_army ASPECT_1 = air TIER_1 = 4 ASPECT_2 = fire TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_lightning_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
  	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_fire TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_air TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	##Air Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_air_elementals_army ASPECT_1 = air TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_air_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_air TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	## Fair Weather
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = fair_weather ASPECT_1 = air TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## add_county_modifier_reduce_agriculture_magic_modifier
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = add_county_modifier_reduce_agriculture_magic_modifier ASPECT_1 = air TIER_1 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_drought TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	##  Favorable Winds
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = favorable_winds ASPECT_1 = air TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_archers_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_archer_cavalry_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_sailing_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Fleet-footed
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = fleet_footed ASPECT_1 = air TIER_1 = 1 ASPECT_2 = water TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_sailing_magic_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:water THRESHOLD = 1 }

	## Tornado
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tornado ASPECT_1 = air TIER_1 = 3  }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = county_increase_magic_wounds TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	# Lightning Blades
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = lightning_blades ASPECT_1 = air TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_knight_effectiveness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Birdseye Oracle 
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = birdseye_oracle ASPECT_1 = air TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hostile_scheme_discovery_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	### Glass Spells

	## Shattercurse
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = shattercurse ASPECT_1 = air TIER_1 = 1 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_death_chance_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }

	## Conduit of a Clear Mind
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = conduit_of_a_clear_mind ASPECT_1 = air TIER_1 = 1 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_loss_mult_modifier TARGET = target SCALED_BY = flag:air THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:metal THRESHOLD = -2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }

	## Shard of Imbued Knowledge
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = shard_of_imbued_knowledge ASPECT_1 = metal TIER_1 = 1 ASPECT_2 = air TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_relevant_lifestyle_perk_points TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_education_progress TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_shard_exhaustion_modifier TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:metal THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_shard_exhaustion_modifier TARGET = caster SCALED_BY = flag:metal THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = caster SCALED_BY = flag:metal THRESHOLD = -1 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_caster TARGET = target }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_character_modifier_shard_exhaustion_modifier TARGET = caster }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_not_has_character_modifier_shard_exhaustion_modifier TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 4 }

	## Mellifluent Vessel
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mellifluent_vessel ASPECT_1 = metal TIER_1 = 1 ASPECT_2 = air TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_melodious_voice_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_glassinger_modifier TARGET = target SCALED_BY = flag:metal THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_cost_tag_of_last_created_spell = { SCALED_BY = glassinger_modifier_scale TARGET = target VALUE = 25 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }

	## Ururra's Augury
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ururras_augury ASPECT_1 = air TIER_1 = 1 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hostile_scheme_discovery_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_omen_intrigue_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_tyranny_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 2 }

	## Forge of the Solemn Visionary
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = forge_of_the_solemn_visionary ASPECT_1 = metal TIER_1 = 1 ASPECT_2 = air TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_cultural_head_fascination_mult_modifier TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_build_speed_modifier TARGET = target SCALED_BY = flag:air THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_general_boost TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }

	## Supplication to the Unfettered Muse
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = supplication_to_the_unfettered_muse ASPECT_1 = metal TIER_1 = 1 ASPECT_2 = air TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = improve_inspiration_quality TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_positive TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_is_inspired TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 2 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }

	## Lacerating Glasswinds
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = lacerating_glasswinds ASPECT_1 = air TIER_1 = 2 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_glasswinds_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = damage_army TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 4 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }

	## Interminable Nexus
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = interminable_nexus ASPECT_1 = metal TIER_1 = 2 ASPECT_2 = air TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_character_capital_county_monthly_development_growth_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_internal_strife_modifier TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_external_condemnation_modifier TARGET = target SCALED_BY = flag:air THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 4 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 4 }

	## Kumhant's Veil
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = kumhants_veil ASPECT_1 = air TIER_1 = 2 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_abstruse_survivability_modifier TARGET = spell_organizer SCALED_BY = flag:air THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_toughness_magic_modifier TARGET = spell_organizer SCALED_BY = flag:metal THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = air_max VALUE = 4 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 3 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:sunarwei }

	## Pane of Passage
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = pane_of_passage ASPECT_1 = air TIER_1 = 3 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_pane_of_passage_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_communication_shards_modifier TARGET = spell_organizer SCALED_BY = flag:air THRESHOLD = 3 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = metal_max VALUE = 1 }

	#####################
	### Nature Aspect ###
	#####################
	
	### General
	
	## Verdant Growth
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = verdant_growth ASPECT_1 = nature TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_verdant_plant_growth_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Wisdom of the Leaf-Whispers
	# GH TODO: Reimplement with proper divination
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = wisdom_of_the_leaf_whispers ASPECT_1 = nature TIER_1 = 4 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_random_divination_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	#set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	#if = {
	#	limit = { exists = scope:new_spell_scope }
	#	scope:new_spell_scope = {
	#		set_spell_cost_effect = { VALUE = 25 }
	#	}
	#}
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }

	## Bloodblight
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = bloodblight_magic ASPECT_1 = nature TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_bubonic_plague TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	# Pox
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = pox_magic ASPECT_1 = nature TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_great_pox TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Poison Nature
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = poison_nature ASPECT_1 = nature TIER_1 = 3  }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	# Resist Disease
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = resist_disease ASPECT_1 = nature TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	# Sacrifice Rare Herbs
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sacrifice_rare_herbs ASPECT_1 = nature TIER_1 = 1 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_tag_to_last_created_spell_scripted_effect = { NAME = generation }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			# create_herbal_sacrificer_component_effect = { REWARD_TYPE = magic_mult REWARD_AMOUNT = 1 REQUIRED = yes }
			# create_pay_gold_spell_component_effect = { COST = 20 REWARD_TYPE = magic_add REWARD_AMOUNT = 6 REQUIRED = yes }
			set_spell_cost_effect = { VALUE = 0 }
		}
	}
	add_variable_to_last_created_spell = { VARIABLE_TYPE = blood_max VALUE = 1 }
	
	## Poison Armor
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = poison_armor ASPECT_1 = nature TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	## Nature's Wrath
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = nature_wrath ASPECT_1 = nature TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_forest_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	
	## Create Wooden Walls
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = create_wooden_walls ASPECT_1 = nature TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_defensive_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_fort_creation_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Wall of Twisted Thorns
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = wall_of_twisted_thorns ASPECT_1 = nature TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_defensive_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_fort_creation_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_county_defender_advantage_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Sporecloud Spell
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sporecloud_spell ASPECT_1 = nature TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:nature THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_ill TARGET = target SCALED_BY = flag:nature THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 10 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 10 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait_negative
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:ill
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_incapable TARGET = target SCALED_BY = flag:nature THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 2 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:trait_negative
		}
		set_variable = {
			name = activation_condition_trait
			value = trait:incapable
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:nature THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 2 }

	## Barkskin
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = barkskin ASPECT_1 = nature TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Thornskin
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = thornskin ASPECT_1 = nature TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_diplomacy_magic_modifier_seduction_negative TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Entangling Vines
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = entangling_vines ASPECT_1 = nature TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_negative_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Photosynthesis
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = photosynthesis ASPECT_1 = nature TIER_1 = 2 ASPECT_2 = light TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	#shape-changing spell add increased prowness and martial, lower learning, diplo, intrigue

 	##Spawn Leshens
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_wild_leshens_armies ASPECT_1 = nature TIER_1 = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_leshens TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_nature TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	##Woodland Hydra
 	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_woodland_hydra_army ASPECT_1 = nature TIER_1 = 4 ASPECT_2 = blood TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_woodland_hydra TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
 	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monsters_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_nature TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_blood TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	if = { 
		limit = { exists = scope:new_spell_scope } 
		scope:new_spell_scope = { 
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no }
			add_sacrifice_prisoner_spell_component_bonus_or_cost_effect = { REWARD_TYPE = gold_cost_subtract REWARD_AMOUNT = 0.5 }			
		}
	}

	## Surrender to the Wild
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = surrender_to_the_wild ASPECT_1 = nature TIER_1 = 2 ASPECT_2 = time TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = spell_organizer SCALED_BY = flag:nature THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = spell_organizer SCALED_BY = flag:nature THRESHOLD = 1 }
	add_spell_tag_to_last_created_spell_scripted_effect = { NAME = generation }
	scope:new_spell_scope ?= { set_spell_cost_effect = { VALUE = 0 } }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_spell_organizer_is_title_holder TARGET = target_title }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = time_max VALUE = 1 }

	### Greeenwender
	
	## Justice of the Primeval Garden
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = justice_of_the_primeval_garden ASPECT_1 = nature TIER_1 = 2 ASPECT_2 = fire TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_prowess_skill TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_aspect_fire TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = sanity_loss TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_slay_dangerous_beast_or_character_in_duel TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_location_terrain_forest TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_location_geographical_region_sarradon TARGET = target }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	
	## Cedar-Witch's Hex
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = cedar_witchs_hex ASPECT_1 = nature TIER_1 = 2 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 50 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 10 }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_travel TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_location_terrain_forest TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_location_geographical_region_sarradon TARGET = target }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:miscast }


	## Wrath of Twin Gods
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = twin_gods_hex_of_wrath ASPECT_1 = nature TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -5 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 50 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 10 }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_travel TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_location_terrain_jungle TARGET = target }
	add_spell_activation_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_location_geographical_region_nattanan_highlands TARGET = target }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:miscast }


	## Embercrown Coronation 
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = embercrown_coronation ASPECT_1 = nature TIER_1 = 1 ASPECT_2 = fire TIER_2 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_gain_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_stewardship_lifestyle_xp TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = sanity_loss TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:wounding }

	## Tu-Nihana's Fork-Tongued Speak 
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = tu_nihanas_fork_tongued_speak ASPECT_1 = nature TIER_1 = 4 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = create_bound_entity_snake TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	#add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = sanity_loss TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	#add_valid_backfire_to_last_created_spell_effect = { BACKFIRE = flag:harmless }


	## Nature Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_nature_elementals_army ASPECT_1 = nature TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_nature_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_nature TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	

	## Mountain Spirit Elementals
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_mountain_spirit_elementals_army ASPECT_1 = stone TIER_1 = 4 ASPECT_2 = nature TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_mountain_spirit_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_stone TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_nature TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Vine Elementals
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_vine_elementals_army ASPECT_1 = nature TIER_1 = 4 ASPECT_2 = water TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_vine_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_nature TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_water TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	### Auroral Cycle Spells

	## Animal Aspect
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = animal_aspect ASPECT_1 = nature TIER_1 = 1 ASPECT_2 = dream TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = animal_aspect_spell_effect TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_animal_gain_modifier TARGET = caster SCALED_BY = flag:nature THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_animal_gain_modifier TARGET = caster SCALED_BY = flag:dream THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = nature_max VALUE = 4 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dream_max VALUE = 4 }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:astiliak }
	
	##################
	### Ice Aspect ###
	##################

	## Inter in Ice
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = inter_in_ice ASPECT_1 = ice TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = freeze_target_character TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_tag_to_last_created_spell_scripted_effect = { NAME = generation }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_inter_in_ice_prisoner_spell_component_effect = { REWARD_TYPE = magic_add REWARD_AMOUNT = 1 REQUIRED = yes }
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_frozen_experience_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Freeze the Earth
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = freeze_the_earth ASPECT_1 = ice TIER_1 = 5 ASPECT_2 = dark TIER_2 = 5 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = gain_frozen_wasteland TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_frozen_experience_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }


	## Iceskin
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = iceskin ASPECT_1 = ice TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_diplomacy_magic_modifier_seduction_negative TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_frozen_experience_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Freeze armor
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = freeze_armor ASPECT_1 = ice TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_frozen_experience_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	##Frozen decay
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = frozen_decay ASPECT_1 = ice TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_iced_prowess TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_frozen_experience_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Ice Golems
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_ice_golem_armies ASPECT_1 = ice TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_ice_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_siege_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_constructs_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_frozen_experience_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_ice TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	##Ice Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_ice_elementals_army ASPECT_1 = ice TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_ice_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_ice TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	## TODO SPELLS

	## Devouring Curse
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = devouring_curse ASPECT_1 = blood TIER_1 = 5 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = wound_curse TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = curse }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = return_to_sender }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = sadistic_effects }
	#
	## Blood Conduit
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = blood_conduit_spell ASPECT_1 = blood TIER_1 = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = blood_conduit TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	#
	## Revenge From Beyond
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = revenge_from_beyond ASPECT_1 = death TIER_1 = 5 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = protector_spirit TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = kill_switch }
	
	########################
	### Celestial Aspect ###
	########################


	##Celestial Elementals
	create_one_aspect_spell_with_global_identifier_effect = {SPELL_IDENTIFIER = spawn_celestial_elementals_army ASPECT_1 = celestial TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_celestial_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_celestial TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Auspex of Mathematical Mind
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = auspex_of_stewardship ASPECT_1 = celestial TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stewardship_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}

	## Summon Precious Meteor
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = summon_precious_meteor ASPECT_1 = celestial TIER_1 = 1 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_exotic_metals_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}

	## Pull Meteor
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = pull_meteor ASPECT_1 = celestial TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = county_increase_magic_wounds TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_destroyed_buildings_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	
	## Read Moon
	# GH TODO: Reimplement with proper divination
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = lunar_astrology ASPECT_1 = celestial TIER_1 = 1 ASPECT_2 = death TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_random_divination_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	#if = {
	#	limit = { exists = scope:new_spell_scope }
	#	scope:new_spell_scope = {
	#		create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
	#		create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
	#	}
	#}
	
	## Draw Lunar Energies
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = moon_magic_generation_spell ASPECT_1 = celestial TIER_1 = 1 ASPECT_2 = death TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = spell_organizer SCALED_BY = flag:death THRESHOLD = -1 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			set_spell_cost_effect = { VALUE = 0 }
		}
	}

	####################
	### Metal Aspect ###
	####################


	##Quicksilver Elementals
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_quicksilver_elementals_army ASPECT_1 = metal TIER_1 = 4 ASPECT_2 = water TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_quicksilver_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_metal TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_water TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	##Metal Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_metal_elementals_army ASPECT_1 = metal TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_metal_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_metal TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Metal Constructs
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_metal_golem_armies ASPECT_1 = metal TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_metal_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_siege_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_constructs_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_metal TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Precious Metal Transmutation
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = precious_metal_transmutation ASPECT_1 = metal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_exotic_metals_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	
	## Ironskin
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ironskin ASPECT_1 = metal TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_diplomacy_magic_modifier_seduction_negative TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Crush Armor
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = crush_armor ASPECT_1 = metal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Bronzeskin
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = bronzeskin ASPECT_1 = metal TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Summon Bronze Golems
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_bronze_golem_armies ASPECT_1 = metal TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_bronze_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_siege_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_constructs_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_metal TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Bestow Bronze Armaments
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = bestow_bronze_armaments ASPECT_1 = metal TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_knight_effectiveness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_toughness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Bronze Fists
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = bronze_fists ASPECT_1 = metal TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	## Arcane Foundries
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = arcane_foundries ASPECT_1 = metal TIER_1 = 3 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_building_construction_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_levy_reinforcement_rate_gain_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = improve_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }

	
	# Pearls and Pits of Gold Spells
	
	## Gold Plague
	#create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = gold_plague ASPECT_1 = metal TIER_1 = 3 ASPECT_2 = blood TIER_2 = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_gold_income_mult_negative TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_gold_negative TARGET = target SCALED_BY = flag:metal THRESHOLD = 0 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spread_to_additional_targets TARGET = none SCALED_BY = flag:blood THRESHOLD = 0 }
	
	## Panoplies Of Steel
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = panoply_of_steel ASPECT_1 = metal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_toughness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## metal_strength
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = imbued_armor ASPECT_1 = metal TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_heavy_infantry_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_slow_army_movement_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_toughness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }

	

	####################
	### Stone Aspect ###
	####################

	###Stone Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_stone_elementals_army ASPECT_1 = stone TIER_1 = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_stone_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_stone TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	## Earth Magic
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = earth_magick ASPECT_1 = stone TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_rocky_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magi_siege_value_add_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_negate_enemy_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	## Stone Fortress
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = stone_fortress ASPECT_1 = stone TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_defensive_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_fort_creation_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Stoneshaping Construction
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = stone_building_construction ASPECT_1 = stone TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_building_construction_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_abundant_stone_modifier TARGET = target_title SCALED_BY = flag:stone THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	
	## Stoneskin
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = stoneskin ASPECT_1 = stone TIER_1 = 1 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_diplomacy_magic_modifier_seduction_negative TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Boneshaping
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = boneshaping ASPECT_1 = stone TIER_1 = 1 ASPECT_2 = water TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_boneshaping_prowess TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_bodily_modification_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	

	## Petrify
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = petrify ASPECT_1 = stone TIER_1 = 1 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance VALUE = 15 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_chance_iteration VALUE = 5 }

	## Stone Serpent
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = stone_serpent ASPECT_1 = stone TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hostile_scheme_discovery_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Strengthen Soil
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = strengthen_soil ASPECT_1 = stone TIER_1 = 2 ASPECT_2 = nature TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_excellent_soil_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Animate Stone Golems
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_stone_golem_armies ASPECT_1 = stone TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_stone_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_siege_golems TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_constructs_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_stone TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Animate Personal Golem
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_stone_golem_familiar ASPECT_1 = stone TIER_1 = 1}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_stone_mount TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = yes }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}

	## Earthquake
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = earthquake ASPECT_1 = stone TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_destroyed_buildings_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_province_modifier_magic_shattered_defenses_modifier TARGET = target_province SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = county_increase_magic_wounds TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	# Draw from Minerals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sacrifice_rare_minerals ASPECT_1 = stone TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_tag_to_last_created_spell_scripted_effect = { NAME = generation }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			# create_mineral_sacrificer_component_effect = { REWARD_TYPE = magic_mult REWARD_AMOUNT = 1 REQUIRED = yes }
			create_gemstone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			#create_pay_gold_spell_component_effect = { COST = 20 REWARD_TYPE = magic_add REWARD_AMOUNT = 8 REQUIRED = yes }
			set_spell_cost_effect = { VALUE = 0 }
		}
	}
	
	## Mountainous Boon
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = stone_boon ASPECT_1 = stone TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2}
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}


	####################
	### Death Aspect ###
	####################
	
	## Death Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_death_elementals_army ASPECT_1 = death TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_death_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = { 
		limit = { exists = scope:new_spell_scope } 
		scope:new_spell_scope = { 
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no } 
		} 
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_death TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }


	## Raise Skeletal Host
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = raise_skeletal_host ASPECT_1 = death TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_undead_skirmishers TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_elite_undead TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_undead_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_bone_sacrifice_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
		
	## Skeletal Craft, Gain Power From Bones
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = skeletalcraft ASPECT_1 = death TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_bone_sacrifice_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = yes }
			set_spell_cost_effect = { VALUE = 0 }
		}
	}
	## Craft From Bones
	# GH URGENT: Reincorporate this once artifact crafting is properly implemented!
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = skeletalartifact ASPECT_1 = death TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = create_skeletal_artifact TARGET = spell_organizer SCALED_BY = flag:total_death THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_bone_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = yes }
		}
	}
		
	## Necrotic Boon
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = necrotic_boon ASPECT_1 = death TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = spell_effect_duration_override VALUE = 10 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_bone_sacrifice_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
			create_aervalr_shard_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 1 REQUIRED = no }
		}
	}
	
	## Sorrowing
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sorrow ASPECT_1 = death TIER_1 = 5 ASPECT_2 = fire TIER_2 = 5 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = county_increase_magic_wounds TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = reduce_development_add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = gain_lichdom_sorrow TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = self SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	

	###################
	### Sand Aspect ###
	###################
	
	##Sand Elementals
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_sand_elementals_army ASPECT_1 = sand TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_sand_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_sand TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
 
	## Desertify
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = desertify ASPECT_1 = sand TIER_1 = 6 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = gain_arcane_desert TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_drought TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	
	## Erode Armor
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = erode_armor ASPECT_1 = sand TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hard_casualty_modifier_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_negative_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }

	#Devour Fortifications
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = devour_fortifications ASPECT_1 = sand TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_decimate_defense_county_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_corroded_defenses_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_destroyed_buildings_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	
	# Desert Mirage Elementals
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_desert_mirage_elementals_army ASPECT_1 = sand TIER_1 = 4 ASPECT_2 = air TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_desert_mirage_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_sand TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_air TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }


	# Dune Reaper Elementals
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_dune_reaper_elementals_army ASPECT_1 = sand TIER_1 = 4 ASPECT_2 = death TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_dune_reaper_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_sand TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_death TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Sandforged Weapons
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sandforged_weapons ASPECT_1 = sand TIER_1 = 2 ASPECT_2 = metal TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_knight_effectiveness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_magic_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
  
	## Sand Shield
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sand_shield ASPECT_1 = sand TIER_1 = 2  }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_toughness_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
  
	## Sinking Sands
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sinking_sands ASPECT_1 = sand TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_disadvantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_army_damage_negative_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
  
	## Dune Speed
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = dune_speed ASPECT_1 = sand TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_movement_speed_positive_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_dry_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	
	## Oasis Bloom
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = oasis_bloom ASPECT_1 = sand TIER_1 = 2 ASPECT_2 = water TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_resource_excellent_soil_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
  
	## Armor Shred
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = armor_shred ASPECT_1 = sand TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	  
	## Abyssal Sandstorm
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = abyssal_sandstorm ASPECT_1 = sand TIER_1 = 5 ASPECT_2 = death TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_gold_negative TARGET = target SCALED_BY = flag:sand THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_gold_income_mult_negative TARGET = target SCALED_BY = flag:sand THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = county_increase_magic_wounds TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = reduce_development TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spread_to_additional_targets TARGET = none SCALED_BY = flag:sand THRESHOLD = 1 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = gain_lichdom_sorrow TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_ruined_agriculture_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 7 }


	###################
	### Dark Aspect ###
	###################

	## Dark Elementals
	create_one_aspect_spell_with_global_identifier_effect = {SPELL_IDENTIFIER = spawn_dark_elementals_army ASPECT_1 = dark TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_dark_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	if = { 
		limit = { exists = scope:new_spell_scope } 
		scope:new_spell_scope = { 
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no 
			} 
		} 
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_death TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
 

	## Shadowy Figures
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = dark_illusions_magic ASPECT_1 = dark TIER_1 = 2 ASPECT_2 = nature TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enemy_knight_kill_chance_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_forest_terrain_advantage_magic_modifier TARGET = target SCALED_BY = flag:nature THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_skirmishers_improvement_add_modifier TARGET = target SCALED_BY = flag:dark THRESHOLD = 0 }
	
	## Veil of Nightmarish Illusions 
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = veil_of_nightmarish_illusions ASPECT_1 = dark TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_diplomacy_magic_modifier_seduction_negative TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 } 

	## Blinding Shadows
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = blind_all ASPECT_1 = dark TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_blind TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Corrupt armor
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = corrupt_armor ASPECT_1 = dark TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }  

	## Shade-Slayed
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = shade_slayed ASPECT_1 = dark TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }  

	## Riftmark and rift-based spells
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = riftmark ASPECT_1 = dark TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_riftmark TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Erase Mental Trauma
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = erase_mental_trauma ASPECT_1 = dark TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_depressed_1 TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = remove_trait_depressed_genetic TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Entropic Host
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_entropic_host ASPECT_1 = dark TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_lesser_voidspawns TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monsters_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }

 	## Awaken FleshMaw
 	 create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = 	awaken_fleshmaw ASPECT_1 = dark TIER_1 = 3 ASPECT_2 = blood TIER_2 = 2 }
 	 add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = 	spawn_army_blade_tendrils TARGET = target_title SCALED_BY = flag:total_spell_level 	THRESHOLD = 4 }
 	 add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = 	spawn_army_marrowdrones TARGET = target_title SCALED_BY = flag:total_spell_level 	THRESHOLD = 5 } 
 	 add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = 	spawn_army_hungering_mouths TARGET = target_title SCALED_BY = flag:total_spell_level 	THRESHOLD = 6 } 

	## Summon Night Gaunts
 	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_night_gaunts_army ASPECT_1 = dark TIER_1 = 6 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_night_gaunts TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monsters_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	if = { 
		limit = { exists = scope:new_spell_scope } 
		scope:new_spell_scope = { 
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = no } 
		} 
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_death TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
 

	## Dark Raid
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = dark_raid ASPECT_1 = dark TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_raid_capture_improvement_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	##add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = stacking_mode VALUE = flag:upgrade }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_hasten_raid_speed_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dark_max VALUE = 9 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = yes }
		}
	}
	
	## Sundeath 
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sundeath ASPECT_1 = dark TIER_1 = 9 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = destroy_sun TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 26 }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = sadistic_effects } 	##All other sadistic effects are commented, not sure what it's supposed to do.
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = charge_mana_prism TARGET = caster SCALED_BY = flag:total_spell_level THRESHOLD = 26 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dark_max VALUE = 27 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_prism_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = yes }
		} 
	}
	if = {  ##Added sacrifices for flavor. Would like to raise mana cost when mana_cost_subtract works properly.
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sacrifice_prisoner_spell_component_effect = { REWARD_TYPE = mana_cost_subtract REWARD_AMOUNT = 1 REQUIRED = yes }
		}
	}
	
	## Prayer of Dark Enlightenment
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = prayer_of_dark_enlightenment ASPECT_1 = dark TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = learn_random_magic_school_spell TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = magic_school VALUE = global_var:absolution_of_the_void }
	set_spell_faith_last_created_spell_effect = { FAITH = faith:redland_cults }

	## Mark of Strength
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_strength ASPECT_1 = dark TIER_1 = 1 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_martial_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Alacrity
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_alacrity ASPECT_1 = dark TIER_1 = 1 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_travel_advantage_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_movement_speed_positive_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Acuity
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_acuity ASPECT_1 = dark TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_cultural_head_fascination_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_cultural_head_fascination_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
    add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
    add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Insight
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_insight ASPECT_1 = dark TIER_1 = 1 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_hostile_scheme_discovery_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
    add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
    add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Rage
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_rage ASPECT_1 = dark TIER_1 = 1 ASPECT_2 = blood TIER_2 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_resistance_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_diplomacy_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Pain
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_pain ASPECT_1 = dark TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_wounded TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Wasting
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_wasting ASPECT_1 = dark TIER_1 = 2 ASPECT_2 = blood TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:blood THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_prowess_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Control
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_control ASPECT_1 = dark TIER_1 = 2 ASPECT_2 = blood TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = dominate_character TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }

	## Mark of Blinding
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = mark_of_blinding ASPECT_1 = dark TIER_1 = 2 ASPECT_2 = blood TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_scheme_discovery_chance_mult_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_loss_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
    add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_stress_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_ritual_tattoos TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
    add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }


	#######################
	### Ethereal Aspect ###
	#######################

	##Ethereal Elementals
	create_one_aspect_spell_with_global_identifier_effect = {SPELL_IDENTIFIER = spawn_ethereal_elementals_army ASPECT_1 = ethereal TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_ethereal_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_ethereal TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
 
	## Rift Siphon
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = siphon_rift_power ASPECT_1 = ethereal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_mana_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			set_spell_cost_effect = { VALUE = 0 }
		}
	}
	

	## Ancestral Betrayal
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ancestral_betrayal ASPECT_1 = ethereal TIER_1 = 4 }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = requires_target_deceased_parent }
	#add_spell_tag_to_last_created_spell_scripted_effect = { NAME = sadistic_effects }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = death_effect TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }


	## Summon Fog
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = summonfog ASPECT_1 = ethereal TIER_1 = 1 ASPECT_2 = death TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_fogswept_modifier TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = reduce_development_add_arcane_fallout TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 1 }


	## Summon Lesser Fogbeasts 
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spawn_ethereal_fogbeast_army ASPECT_1 = ethereal TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_fogbeasts TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monsters_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_ethereal TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
 

	## Rift Walk
	#create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = rift_walk ASPECT_1 = ethereal TIER_1 = 3 }
	#add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = teleport_army TARGET = target_title SCALED_BY = flag:total_spell_level THRESHOLD = 2 }


	## Spoils of the Dead
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = spoils_of_the_dead ASPECT_1 = ethereal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_learning_gain_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }


	## Haunting Power
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = haunting_power ASPECT_1 = ethereal TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_haunting_power_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }


	## Ward of the Ancestors
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = ward_of_the_ancestors ASPECT_1 = ethereal TIER_1 = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_resistance_magic_modifier TARGET = target SCALED_BY = flag:ethereal THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_enemy_hostile_scheme_phase_duration_add_modifier TARGET = target SCALED_BY = flag:ethereal THRESHOLD = 2 }

	## Defiled Nadir (non-school spell)
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = defiled_nadir ASPECT_1 = ethereal TIER_1 = 2 ASPECT_2 = stone TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_health_gain_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_defiled_nadir_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }


	####################
	### Dream Aspect ###
	####################

	##Dream Elementals
	create_one_aspect_spell_with_global_identifier_effect = {SPELL_IDENTIFIER = spawn_dream_elementals_army ASPECT_1 = dream TIER_1 = 5}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = {NAME = spawn_army_dream_elementals TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD=3}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magical_improvement TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_gh_elementalist TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }
	scope:new_tag ?= {
		set_variable = {
			name = spell_effect_chance
			value = 25
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_trait_xp_gh_elementalist_magical_dream TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	# Pearls and Pits of Gold Spells

	##Internal Journey
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = interior_journey ASPECT_1 = dream TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = initiate_spell_event_interior_journey TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	

	##Unveiling
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = unveiling ASPECT_1 = dream TIER_1 = 1}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_resistance_gain_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
		
	## Cloud Mind
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = cloud_mind ASPECT_1 = dream TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_mind_fog_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	if = {
		limit = { exists = scope:new_spell_scope }
		scope:new_spell_scope = {
			create_sedative_spell_component_effect = { REWARD_TYPE = inherits_aspects REWARD_AMOUNT = 0 REQUIRED = no }
		}
	}

	## Extract Lucrative Secrets
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = extract_lucrative_secrets ASPECT_1 = dream TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_gold_positive TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_intrigue_gain_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	set_spell_gold_cost_of_last_created_spell_effect = { VALUE = 0 }
	
	## Obliterate Mind
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = obliterate_mind ASPECT_1 = dream TIER_1 = 3 }
	add_spell_effect_cluster_to_last_created_spell_scripted_effect = { NAME = sanity_loss TARGET = target SCALED_BY = flag:dream THRESHOLD = 0 }

	## Glimpse Reality
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = glimpse_reality ASPECT_1 = dream TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = dream_glimpse_reality TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	
	## Key Of The Obsidian Gate
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = key_of_the_obsidian_gate ASPECT_1 = dream TIER_1 = 3 ASPECT_2 = light TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = learn_random_magic_school_spell TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_variable_to_last_created_spell_effect_tag = { VARIABLE_TYPE = magic_school VALUE = global_var:silentspeak }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = stress_gain TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 2 }

	## Weaver's Descent
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = weavers_descent ASPECT_1 = dream TIER_1 = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = spawn_army_archonarachs TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 3 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_battle_magic_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 4 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monsters_improvement_add_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 5 }

	###################
	### Dawn Aspect ###
	###################

	## Purm's Mirthful Beginning
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = purms_mirthful_beginning ASPECT_1 = dawn TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_magic_monthly_lifestyle_xp_gain_mult_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = education_lifestyle_xp_gain_mult_negative TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = -1 }
	add_spell_casting_trigger_tag_to_last_created_spell_scripted_effect = { NAME = spell_trigger_adult TARGET = target }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dawn_max VALUE = 3 }

	## Hand, Spear, and Crown
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = hand_spear_and_crown ASPECT_1 = dawn TIER_1 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_men_at_arms_recruitment_cost_positive_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_title_creation_cost_mult_positive_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dawn_max VALUE = 4 }

	## Imperial Ascension
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = imperial_ascension ASPECT_1 = dawn TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_short_reign_duration_mult_positive_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_court_grandeur_baseline_add_positive_modifier TARGET = target SCALED_BY = flag:total_spell_level THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dawn_max VALUE = 6 }

	## Sundering Impetus
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = sundering_impetus ASPECT_1 = dawn TIER_1 = 1 ASPECT_2 = fire TIER_2 = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_attacker_advantage_positive_modifier TARGET = spell_organizer SCALED_BY = flag:dawn THRESHOLD = -1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_siege_phase_time_positive_modifier TARGET = spell_organizer SCALED_BY = flag:fire THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dawn_max VALUE = 4 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = time_max VALUE = 3 }

	## Concordat of Dawn and Stars
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = concordat_of_dawn_and_stars ASPECT_1 = dawn TIER_1 = 2 ASPECT_2 = time TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_arcane_fallout_reduction_modifier TARGET = target_title SCALED_BY = flag:time THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_magic_habitability_add_modifier TARGET = target_title SCALED_BY = flag:dawn THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dawn_max VALUE = 5 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = time_max VALUE = 5 }

	## Bestirring of the Demesne Eternal
	create_two_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = bestirring_of_the_demesne_eternal ASPECT_1 = dawn TIER_1 = 2 ASPECT_2 = nature TIER_2 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enhanced_farmland_modifier TARGET = target_title SCALED_BY = flag:none THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:terrain
		}
		set_variable = {
			name = activation_condition_terrain
			value = flag:plains
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enhanced_farmland_modifier TARGET = target_title SCALED_BY = flag:none THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:terrain
		}
		set_variable = {
			name = activation_condition_terrain
			value = flag:farmlands
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_enhanced_farmland_modifier TARGET = target_title SCALED_BY = flag:none THRESHOLD = -1 }
	scope:new_tag ?= {
		add_to_variable_list = {
			name = activation_condition_list
			target = flag:terrain
		}
		set_variable = {
			name = activation_condition_terrain
			value = flag:floodplains
		}
	}
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_building_construction_county_magic_modifier TARGET = target_title SCALED_BY = flag:dawn THRESHOLD = 1 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_county_modifier_improve_agriculture_magic_modifier TARGET = target_title SCALED_BY = flag:nature THRESHOLD = 1 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = dawn_max VALUE = 5 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = nature_max VALUE = 5 }

	###################
	### Time Aspect ###
	###################

	## Borrowed Time March
	create_one_aspect_spell_with_global_identifier_effect = { SPELL_IDENTIFIER = borrowed_time_march ASPECT_1 = time TIER_1 = 2 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_movement_speed_positive_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_spell_effect_tag_to_last_created_spell_scripted_effect = { NAME = add_character_modifier_character_county_opinion_negative_modifier TARGET = spell_organizer SCALED_BY = flag:total_spell_level THRESHOLD = 0 }
	add_variable_to_last_created_spell = { VARIABLE_TYPE = time_max VALUE = 5 }
}