GH_on_leave_council = {
	effect = {
		scope:councillor = {
			# Kick the character out of any cliques if they are no longer eligible
			# For some reason needs to be triggered this way rather than though "events"
			trigger_event = clique.0003
		}
	}
}

GH_on_fired_from_council = {
	effect = {
		scope:councillor = {
			# Kick the character out of any cliques if they are no longer eligible
			# For some reason needs to be triggered this way rather than though "events"
			trigger_event = clique.0003
		}
	}
}

GH_on_councillor_left = {
	effect = {
		scope:councillor = {
			# Kick the character out of any cliques if they are no longer eligible
			# For some reason needs to be triggered this way rather than though "events"
			trigger_event = clique.0003

			#GH TODO: Better way of doing this. Couldn't find a way to detect if the court magi is the one that left
			scope:old_employer = {
				if = {
					limit = {
						is_alive = yes
						has_variable = casting_through_court_magi_var
					}
					remove_variable = casting_through_court_magi_var
				}
			}
		}
	}
}

task_manage_crew_side_effects = {
	trigger = {
		NOT = { has_variable = had_quartermaster_task_side_effect }	
		exists = cp:councillor_quartermaster
	}
	
	random_events = {
		chance_to_happen = 2
		300 = 0
		#Bad side effects
		100 = quartermaster_task.0011 # Disorderly Crew
		50 = quartermaster_task.0021  # Mutiny
		#Good side effects
		100 = quartermaster_task.0031 # Recruitment Drive
		100 = quartermaster_task.0041 # Quartermaster Spreads Fame
	}
}

task_establish_shadow_port_success = {
	random_events = {
		300 = 0
		#100 = quartermaster_task.0301
	}
}

task_commerce_raid_side_effects = {
	trigger = {
		NOT = { has_variable = had_commerice_raid_side_effect }

		exists = cp:councillor_quartermaster
	}

	random_events = {
		chance_to_happen = 2
		300 = 0
		# Bad side effects
		70 = quartermaster_task.0071 # Failed Raid
		70 = quartermaster_task.0081 # Angered Ruler
		# Good Side effects
		70 = quartermaster_task.0051 # Captured Treasure Ship 
	}
}